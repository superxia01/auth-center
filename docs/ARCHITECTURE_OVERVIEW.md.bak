# KeeNChase Nexus - ç³»ç»Ÿæ¶æ„æ€»è§ˆï¼ˆå®ªæ³•ï¼‰

**æœ€åæ›´æ–°**: 2026-02-03
**ç‰ˆæœ¬**: V3.0 (å‰åç«¯åˆ†ç¦» + Go åç«¯ + ç»Ÿä¸€è§„èŒƒ)
**æ€§è´¨**: æ‰€æœ‰ä¸šåŠ¡ç³»ç»Ÿã€è´¦å·ä¸­å¿ƒã€æ•°æ®åº“çš„æŠ€æœ¯è§„èŒƒå’Œéƒ¨ç½²æ ‡å‡†

---

## âš ï¸ é‡è¦æ¦‚å¿µè¯´æ˜

**æœ¬æ–‡æ¡£æ¶‰åŠçš„"ç”¨æˆ·"æœ‰ä¸¤ä¸ªä¸åŒå±‚é¢ï¼Œè¯·ä»”ç»†åŒºåˆ†**ï¼š

### 1. æ“ä½œç³»ç»Ÿç”¨æˆ·ï¼ˆOS Userï¼‰
ç”¨äºSSHç™»å½•æœåŠ¡å™¨ï¼Œç®¡ç†æ“ä½œç³»ç»Ÿå±‚é¢çš„æ“ä½œã€‚

| æœåŠ¡å™¨ | IPåœ°å€ | æ“ä½œç³»ç»Ÿç”¨æˆ· | è¯´æ˜ |
|--------|--------|-------------|------|
| **ä¸Šæµ·åº”ç”¨æœåŠ¡å™¨** | 101.35.120.199 | `ubuntu` | æ™®é€šç”¨æˆ·ï¼Œè¿è¡ŒGoåº”ç”¨ã€Nginxç­‰ |
| **æ­å·æ•°æ®åº“æœåŠ¡å™¨** | 47.110.82.96 | `root` | ç®¡ç†å‘˜ç”¨æˆ·ï¼Œç®¡ç†Dockerå’ŒPostgreSQL |

**SSHè¿æ¥ç¤ºä¾‹**ï¼š
```bash
ssh shanghai-tencent      # ä»¥ubuntuç”¨æˆ·ç™»å½•ä¸Šæµ·æœåŠ¡å™¨
ssh hangzhou-ali          # ä»¥rootç”¨æˆ·ç™»å½•æ­å·æœåŠ¡å™¨
```

### 2. æ•°æ®åº“ç”¨æˆ·ï¼ˆDatabase Userï¼‰
ç”¨äºPostgreSQLæ•°æ®åº“è¿æ¥ï¼Œè®¿é—®æ•°æ®åº“æ•°æ®ã€‚

| æ•°æ®åº“ç”¨æˆ· | æƒé™ | ç”¨é€” |
|-----------|------|------|
| **nexus** | è¶…çº§ç”¨æˆ· | æ‰€æœ‰ä¸šåŠ¡ç³»ç»Ÿç»Ÿä¸€ä½¿ç”¨ |
| nexus123 | å¯†ç  | - |

**æ•°æ®åº“è¿æ¥ç¤ºä¾‹**ï¼š
```bash
# è¿æ¥å­—ç¬¦ä¸²æ ¼å¼
postgresql://nexus:nexus123@localhost:5432/æ•°æ®åº“å?sslmode=disable
```

### 3. ä¸¤è€…çš„å…³ç³»

```
å¼€å‘è€…Mac
  â””â”€ SSHè¿æ¥ â†’ ä¸Šæµ·æœåŠ¡å™¨ï¼ˆæ“ä½œç³»ç»Ÿç”¨æˆ·ï¼šubuntuï¼‰
      â””â”€ è¿è¡ŒGoåº”ç”¨
          â””â”€ è¿æ¥æ•°æ®åº“ï¼ˆæ•°æ®åº“ç”¨æˆ·ï¼šnexusï¼‰
              â””â”€ PostgreSQLæ•°æ®åº“ï¼ˆæ­å·æœåŠ¡å™¨ï¼‰
```

**âš ï¸ å¸¸è§é”™è¯¯**ï¼š
- âŒ æ··æ·†ï¼šç”¨æ“ä½œç³»ç»Ÿç”¨æˆ·ï¼ˆubuntuã€rootï¼‰è¿æ¥æ•°æ®åº“
- âœ… æ­£ç¡®ï¼šç”¨æ•°æ®åº“ç”¨æˆ·ï¼ˆnexusï¼‰è¿æ¥æ•°æ®åº“
- âŒ æ··æ·†ï¼šç”¨æ•°æ®åº“ç”¨æˆ·ï¼ˆnexusï¼‰SSHç™»å½•æœåŠ¡å™¨
- âœ… æ­£ç¡®ï¼šç”¨æ“ä½œç³»ç»Ÿç”¨æˆ·ï¼ˆubuntuã€rootï¼‰SSHç™»å½•æœåŠ¡å™¨

**åœ¨æœ¬æ–‡æ¡£ä¸­**ï¼š
- æåˆ°"SSHç™»å½•"ã€"ç”¨æˆ·ubuntu/root" â†’ æŒ‡æ“ä½œç³»ç»Ÿç”¨æˆ·
- æåˆ°"æ•°æ®åº“è¿æ¥"ã€"ç”¨æˆ·nexus" â†’ æŒ‡æ•°æ®åº“ç”¨æˆ·

---

## ğŸ“œ æ–‡æ¡£æ€§è´¨ä¸é€‚ç”¨èŒƒå›´

### æœ¬æ–‡æ¡£å®šä½

**"å®ªæ³•"çº§åˆ«**ï¼šæœ¬æ–‡æ¡£æ˜¯ KeeNChase æ‰€æœ‰ä¸šåŠ¡ç³»ç»Ÿçš„æœ€é«˜æŠ€æœ¯è§„èŒƒï¼Œæ‰€æœ‰ç³»ç»Ÿè®¾è®¡ã€å¼€å‘ã€éƒ¨ç½²**å¿…é¡»éµå®ˆ**ã€‚

### é€‚ç”¨ç³»ç»Ÿ

| ç³»ç»Ÿ | åŸŸå | çŠ¶æ€ | æ¶æ„ | éƒ¨ç½² |
|------|------|------|------|------|
| è´¦å·ä¸­å¿ƒ | os.crazyaigc.com | âœ… å·²éƒ¨ç½² | **V3.0: Go + Vite + React + MUI** | ä¸Šæµ· |
| PRä¸šåŠ¡ç³»ç»Ÿ | pr.crazyaigc.com | âœ… å·²éƒ¨ç½² | **V3.0: Go + Vite + React** âœ… 100% | ä¸Šæµ· |
| AIç”Ÿå›¾ç³»ç»Ÿ | pixel.crazyaigc.com | âœ… å·²éƒ¨ç½² | **V3.0: Go + Vite + React** âœ… 100% | ä¸Šæµ· |
| æŠ¥ä»·ç³»ç»Ÿ | quote.crazyaigc.com | âœ… å·²éƒ¨ç½² | **V3.0: Go + Vite + React** | ä¸Šæµ· |
| å®˜ç½‘ | www.crazyaigc.com | âœ… å·²éƒ¨ç½² | V1.0: Next.js (SSR) | Vercel |
| çŸ¥è¯†åº“ç³»ç»Ÿ | study.crazyaigc.com | ğŸš§ å¼€å‘ä¸­ | V1.0: Next.js (SSR) | å¾…éƒ¨ç½² |
| å®¢æˆ·ç®¡ç†ç³»ç»Ÿ | crm.crazyaigc.com | ğŸš§ å¼€å‘ä¸­ | V1.0: Next.js (SSR) | å¾…éƒ¨ç½² |

### ç‰ˆæœ¬æ¼”è¿›è·¯çº¿

```
V1.0 â†’ V2.0 â†’ V3.0 (å½“å‰æ ‡å‡†)
å•ä½“    Monorepo  å‰åç«¯åˆ†ç¦»
Next.js Next.js  Go + Vite/React
```

**æ‰€æœ‰æ–°ç³»ç»Ÿå¿…é¡»é‡‡ç”¨ V3.0 æ¶æ„**ï¼ˆGo + Vite/Reactï¼‰ï¼Œç°æœ‰ç³»ç»Ÿé€æ­¥è¿ç§»ã€‚

---

## ğŸ“Š æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              ç”¨æˆ·å±‚ (æµè§ˆå™¨/App)                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â–¼                             â–¼                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ os.crazyaigc  â”‚           â”‚ pr.crazyaigc  â”‚           â”‚pixel.crazyaigcâ”‚
â”‚     .com      â”‚           â”‚     .com      â”‚           â”‚     .com      â”‚
â”‚  (è´¦å·ä¸­å¿ƒ)    â”‚           â”‚  (PRä¸šåŠ¡)     â”‚           â”‚  (AIç”Ÿå›¾)     â”‚
â”‚  âœ… ä¸Šæµ·éƒ¨ç½²    â”‚           â”‚  âœ… ä¸Šæµ·éƒ¨ç½²    â”‚           â”‚  âœ… ä¸Šæµ·éƒ¨ç½²   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                           â”‚                           â”‚
        â–¼                           â–¼                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚quote.crazyaigcâ”‚           â”‚ www.crazyaigc â”‚           â”‚   å¾…æ‰©å±•      â”‚
â”‚     .com      â”‚           â”‚     .com      â”‚           â”‚               â”‚
â”‚  (æŠ¥ä»·ç³»ç»Ÿ)    â”‚           â”‚  (å®˜ç½‘)       â”‚           â”‚               â”‚
â”‚  âœ… ä¸Šæµ·éƒ¨ç½²    â”‚           â”‚  âœ… Verceléƒ¨ç½²  â”‚           â”‚               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                           â”‚                           â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚        ç»Ÿä¸€æ•°æ®å±‚ (æ­å·æœåŠ¡å™¨ 47.110.82.96)              â”‚
        â”‚                                                           â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
        â”‚  â”‚         PostgreSQL 15 (ç«¯å£5432)               â”‚      â”‚
        â”‚  â”‚                                                 â”‚      â”‚
        â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚      â”‚
        â”‚  â”‚  â”‚  auth_center_db  (è®¤è¯æ•°æ®åº“)           â”‚   â”‚      â”‚
        â”‚  â”‚  â”‚  - users (ç»Ÿä¸€ç”¨æˆ·ID)                  â”‚   â”‚      â”‚
        â”‚  â”‚  â”‚  - user_accounts (ç™»å½•å…¥å£)           â”‚   â”‚      â”‚
        â”‚  â”‚  â”‚  - sessions (Tokenç®¡ç†)                â”‚   â”‚      â”‚
        â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚      â”‚
        â”‚  â”‚                                                 â”‚      â”‚
        â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚      â”‚
        â”‚  â”‚  â”‚  pr_business_db   (PRä¸šåŠ¡æ•°æ®åº“)        â”‚   â”‚      â”‚
        â”‚  â”‚  â”‚  - users, profiles, tickets            â”‚   â”‚      â”‚
        â”‚  â”‚  â”‚  - wallets, invitations               â”‚   â”‚      â”‚
        â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚      â”‚
        â”‚  â”‚                                                 â”‚      â”‚
        â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚      â”‚
        â”‚  â”‚  â”‚  pixel_business_db (AIç”Ÿå›¾æ•°æ®åº“)       â”‚   â”‚      â”‚
        â”‚  â”‚  â”‚  - users, designs, assets              â”‚   â”‚      â”‚
        â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚      â”‚
        â”‚  â”‚                                                 â”‚      â”‚
        â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚      â”‚
        â”‚  â”‚  â”‚  quote_business_db  (æŠ¥ä»·ç³»ç»Ÿæ•°æ®åº“)     â”‚   â”‚      â”‚
        â”‚  â”‚  â”‚  - users, quotes, products              â”‚   â”‚      â”‚
        â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚      â”‚
        â”‚  â”‚                                                 â”‚      â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸŒ åˆ†å¸ƒå¼éƒ¨ç½²æ¶æ„

### ä¸‰ä¸ªå¹³çº§ä»“åº“

 KeeNChase é¡¹ç›®ç°å·²æ‹†åˆ†ä¸ºä¸‰ä¸ªå¹³çº§ä»“åº“ï¼š

| ä»“åº“åç§° | è·¯å¾„ | ç”¨é€” | çŠ¶æ€ |
|---------|------|------|------|
| **keenchase-nexus** | `/Users/xia/Documents/GitHub/keenchase-nexus` | åŸå§‹å‚è€ƒä»£ç  + æŠ€æœ¯æ–‡æ¡£ | âœ… å‚è€ƒåº“ |
| **auth-center** | `/Users/xia/Documents/GitHub/auth-center` | è´¦å·ä¸­å¿ƒï¼ˆç‹¬ç«‹ V3.0ï¼‰ | âœ… ç”Ÿäº§ |
| **pr-business** | `/Users/xia/Documents/GitHub/pr-business` | PR ä¸šåŠ¡ç³»ç»Ÿï¼ˆç‹¬ç«‹ V3.0ï¼‰ | âœ… ç”Ÿäº§ |

#### 1. keenchase-nexus - å‚è€ƒä»£ç ä»“åº“

**ç”¨é€”**ï¼šä¿ç•™åŸå§‹ Next.js å…¨æ ˆä»£ç ï¼Œä½œä¸ºæ‹†åˆ†å…¶ä»–ç³»ç»Ÿçš„å‚è€ƒ

**åŒ…å«å†…å®¹**ï¼š
- âœ… å®Œæ•´çš„ Next.js å…¨æ ˆåº”ç”¨ä»£ç ï¼ˆ`app/`ã€`components/`ã€`lib/`ï¼‰
- âœ… æŠ€æœ¯æ–‡æ¡£ï¼ˆ`docs/`ï¼‰
- âœ… æ•°æ®åº“æ¨¡å‹ï¼ˆ`prisma/`ï¼‰
- âœ… éƒ¨ç½²è„šæœ¬å‚è€ƒï¼ˆ`deploy-*.sh`ï¼‰

**æœªæ¥å‚è€ƒä»·å€¼**ï¼š
- ğŸ“‹ æ‹†åˆ†"æ— é™åˆ›ä½œ"ç³»ç»Ÿæ—¶çš„å‚è€ƒ
- ğŸ“‹ æ‹†åˆ†"è¶…çº§åƒç´ "ç³»ç»Ÿæ—¶çš„å‚è€ƒ
- ğŸ“‹ æŸ¥çœ‹åŸå§‹ä¸šåŠ¡é€»è¾‘å®ç°

#### 2. auth-center - è´¦å·ä¸­å¿ƒç‹¬ç«‹ä»“åº“

**ç”¨é€”**ï¼šç»Ÿä¸€çš„ç”¨æˆ·è®¤è¯æœåŠ¡

**æ¶æ„**ï¼šV3.0 å‰åç«¯åˆ†ç¦»ï¼ˆGo + Vite + React + MUIï¼‰

**éƒ¨ç½²åœ°å€**ï¼šhttps://os.crazyaigc.com

#### 3. pr-business - PR ä¸šåŠ¡ç³»ç»Ÿç‹¬ç«‹ä»“åº“

**ç”¨é€”**ï¼šå•†å®¶ä»»åŠ¡å‘å¸ƒã€è¾¾äººæ¥å•ã€é‡‘å¸ç§¯åˆ†ç³»ç»Ÿ

**æ¶æ„**ï¼šV3.0 å‰åç«¯åˆ†ç¦»ï¼ˆGo + Next.jsï¼‰âœ… **å·²å®Œå…¨å®ç°**

**éƒ¨ç½²åœ°å€**ï¼šhttps://pr.crazyaigc.com

**å®ŒæˆçŠ¶æ€**ï¼š
- âœ… 81/81 API è·¯ç”±ä»£ç†ï¼ˆ100%ï¼‰
- âœ… 46/46 å·¥ä½œåŒºé¡µé¢ï¼ˆ100%ï¼‰
- âœ… 107/107 Go åç«¯ APIï¼ˆ100%ï¼‰
- âœ… 0 ä¸ª TODO æ³¨é‡Š
- âœ… ä¸ V3.0 æ¶æ„æ ‡å‡†å®Œå…¨å¯¹é½

**æ–‡æ¡£**ï¼š
- [å¼€å‘è®¡åˆ’ï¼ˆå·²å®Œæˆï¼‰](../pr-business/DEVELOPMENT_PLAN_COMPLETED.md)

---

### ä»£ç ä»“åº“ç»“æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   KeeNChase ä»£ç ä»“åº“åˆ†å¸ƒ                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ“ GitHub: github.com/superxia01
ğŸ“ æœ¬åœ°è·¯å¾„: /Users/xia/Documents/GitHub

â”œâ”€â”€ ğŸ“¦ keenchase-nexus = åŸå§‹å‚è€ƒä»£ç ä»“åº“
â”‚   â”œâ”€â”€ docs/                      â† æŠ€æœ¯æ–‡æ¡£
â”‚   â”‚   â”œâ”€â”€ ARCHITECTURE_OVERVIEW.md
â”‚   â”‚   â”œâ”€â”€ AUTH_CENTER_INTEGRATION_GUIDE.md
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ app/                       â† Next.js å…¨æ ˆåº”ç”¨ï¼ˆåŸå§‹ä»£ç ï¼‰
â”‚   â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ prisma/
â”‚   â”œâ”€â”€ deploy-auth-center-v3.sh   â† éƒ¨ç½²è„šæœ¬å‚è€ƒ
â”‚   â””â”€â”€ [ä¿ç•™ä½œä¸ºæ‹†åˆ†å…¶ä»–ç³»ç»Ÿçš„å‚è€ƒ]
â”‚
â”œâ”€â”€ ğŸ“¦ auth-center = è´¦å·ä¸­å¿ƒ (os.crazyaigc.com) - ç‹¬ç«‹ä»“åº“
â”‚   â”œâ”€â”€ frontend-vite/             â† Vite + React + MUI å‰ç«¯
â”‚   â”œâ”€â”€ backend/                   â† Go åç«¯ (GORM)
â”‚   â”œâ”€â”€ prisma/schema.prisma       # å‚è€ƒæ¨¡å‹
â”‚   â”œâ”€â”€ README.md                  # è¯¦ç»†æ–‡æ¡£
â”‚   â””â”€â”€ docs/
â”‚       â””â”€â”€ ARCHITECTURE_OVERVIEW.md
â”‚
â”œâ”€â”€ ğŸ“¦ pr-business = PRä¸šåŠ¡ç³»ç»Ÿ (pr.crazyaigc.com) - ç‹¬ç«‹ä»“åº“
â”‚   â”œâ”€â”€ frontend/                  â† Vite + React å‰ç«¯ (SPA)
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ pages/            # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â””â”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ index.html
â”‚   â”‚   â”œâ”€â”€ vite.config.ts
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â”‚
â”‚   â”œâ”€â”€ backend/                   â† Go åç«¯ (All APIs)
â”‚   â”‚   â”œâ”€â”€ cmd/server/main.go
â”‚   â”‚   â”œâ”€â”€ internal/
â”‚   â”‚   â”‚   â”œâ”€â”€ handler/           # HTTP å¤„ç†å™¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ auth.go        # è®¤è¯ç›¸å…³
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ tasks.go       # ä»»åŠ¡ç®¡ç†
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ audit.go       # å®¡æ ¸é˜Ÿåˆ—
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ invitations.go # é‚€è¯·ç³»ç»Ÿ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ assignments.go # ä»»åŠ¡åˆ†é…
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ wallet.go      # é’±åŒ…ç§¯åˆ†
â”‚   â”‚   â”‚   â”œâ”€â”€ service/           # ä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”‚   â”œâ”€â”€ repository/        # æ•°æ®è®¿é—®
â”‚   â”‚   â”‚   â”œâ”€â”€ middleware/        # ä¸­é—´ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ models/            # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”‚   â””â”€â”€ config/            # é…ç½®ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ go.mod
â”‚   â”‚   â”œâ”€â”€ bin/server             # ç¼–è¯‘åçš„äºŒè¿›åˆ¶
â”‚   â”‚   â””â”€â”€ Dockerfile
â”‚   â”‚
â”‚   â”œâ”€â”€ prisma/
â”‚   â”‚   â””â”€â”€ schema.prisma
â”‚   â”‚
â”‚   â”œâ”€â”€ deploy-pr-business-v3.sh  â† V3.0 éƒ¨ç½²è„šæœ¬
â”‚   â””â”€â”€ README.md
â”‚
â””â”€â”€ ğŸ“¦ superpixel = AIç”Ÿå›¾ç³»ç»Ÿ (pixel.crazyaigc.com) - ç‹¬ç«‹ä»“åº“
    â”œâ”€â”€ frontend/                  â† Vite + React å‰ç«¯ (SPA)
    â”‚   â”œâ”€â”€ src/
    â”‚   â”‚   â”œâ”€â”€ pages/
    â”‚   â”‚   â”œâ”€â”€ components/
    â”‚   â”‚   â””â”€â”€ lib/
    â”‚   â”œâ”€â”€ index.html
    â”‚   â”œâ”€â”€ vite.config.ts
    â”‚   â””â”€â”€ package.json
    â”‚
    â”œâ”€â”€ backend/                   â† Go åç«¯ (All APIs)
    â”‚   â”œâ”€â”€ cmd/server/main.go
    â”‚   â”œâ”€â”€ internal/
    â”‚   â”‚   â”œâ”€â”€ handler/           # HTTP å¤„ç†å™¨
    â”‚   â”‚   â”œâ”€â”€ service/           # ä¸šåŠ¡é€»è¾‘
    â”‚   â”‚   â”œâ”€â”€ repository/        # æ•°æ®è®¿é—®
    â”‚   â”‚   â”œâ”€â”€ middleware/        # ä¸­é—´ä»¶
    â”‚   â”‚   â”œâ”€â”€ models/            # æ•°æ®æ¨¡å‹
    â”‚   â”‚   â””â”€â”€ config/            # é…ç½®ç®¡ç†
    â”‚   â”œâ”€â”€ go.mod
    â”‚   â”œâ”€â”€ bin/server             # ç¼–è¯‘åçš„äºŒè¿›åˆ¶
    â”‚   â””â”€â”€ Dockerfile
    â”‚
    â”œâ”€â”€ prisma/
    â”‚   â””â”€â”€ schema.prisma
    â”‚
    â””â”€â”€ README.md
```

### æœåŠ¡å™¨åˆ†å¸ƒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      æœåŠ¡å™¨éƒ¨ç½²åˆ†å¸ƒ                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ“ æ­å·æœåŠ¡å™¨ (47.110.82.96) - ç»Ÿä¸€æ•°æ®åº“æœåŠ¡å™¨
â”œâ”€ é…ç½®: é˜¿é‡Œäº‘ECS
â”œâ”€ éƒ¨ç½²æœåŠ¡:
â”‚   â””â”€ âœ… PostgreSQL 15 (ç«¯å£5432)
â”‚       â”œâ”€ auth_center_db (è´¦å·ä¸­å¿ƒæ•°æ®åº“)
â”‚       â”œâ”€ pr_business_db (PRä¸šåŠ¡æ•°æ®åº“)
â”‚       â”œâ”€ pixel_business_db (AIç”Ÿå›¾æ•°æ®åº“)
â”‚       â””â”€ quote_business_db (æŠ¥ä»·ç³»ç»Ÿæ•°æ®åº“)
â””â”€ å®‰å…¨:
    â”œâ”€ æ•°æ®åº“ç«¯å£ä»…å†…ç½‘è®¿é—®
    â”œâ”€ SSL/TLSåŠ å¯†è¿æ¥
    â””â”€ IPç™½åå•é™åˆ¶

ğŸ“ ä¸Šæµ·æœåŠ¡å™¨ (101.35.120.199) - è‡ªæœ‰åº”ç”¨æœåŠ¡å™¨
â”œâ”€ âœ… os.crazyaigc.com (è´¦å·ä¸­å¿ƒ) - V3.0 æ¶æ„
â”‚   â”œâ”€ å‰ç«¯: Vite + React é™æ€æ–‡ä»¶ (Nginx ç›´æ¥æœåŠ¡)
â”‚   â”œâ”€ åç«¯: Go API :8080 (Systemd ç®¡ç†)
â”‚   â”œâ”€ æ¡†æ¶: Vite 7 + React 19 + MUI 7 + Go 1.25
â”‚   â”œâ”€ SSLè¯ä¹¦: æœ‰æ•ˆæœŸè‡³ 2026-04-27
â”‚   â””â”€ çŠ¶æ€: âœ… åœ¨çº¿è¿è¡Œ
â”‚
â”œâ”€ âœ… pr.crazyaigc.com (PRä¸šåŠ¡) - V3.0 æ¶æ„
â”‚   â”œâ”€ å‰ç«¯: Vite + React é™æ€æ–‡ä»¶ (Nginx ç›´æ¥æœåŠ¡)
â”‚   â”œâ”€ åç«¯: Go API :8081 (Systemd ç®¡ç†)
â”‚   â”œâ”€ æ¡†æ¶: Vite 6 + React 19 + Go 1.25
â”‚   â”œâ”€ SSLè¯ä¹¦: æœ‰æ•ˆæœŸè‡³ 2026-04-27
â”‚   â””â”€ çŠ¶æ€: âœ… åœ¨çº¿è¿è¡Œ
â”‚
â”œâ”€ âœ… pixel.crazyaigc.com (AIç”Ÿå›¾) - V3.0 æ¶æ„
â”‚   â”œâ”€ å‰ç«¯: Vite + React é™æ€æ–‡ä»¶ (Nginx ç›´æ¥æœåŠ¡)
â”‚   â”œâ”€ åç«¯: Go API :8082 (Systemd ç®¡ç†)
â”‚   â”œâ”€ æ¡†æ¶: Vite 6 + React 19 + Tailwind + Zustand + Go 1.21
â”‚   â”œâ”€ SSLè¯ä¹¦: æœ‰æ•ˆæœŸè‡³ 2026-04-27
â”‚   â””â”€ çŠ¶æ€: âœ… åœ¨çº¿è¿è¡Œ
â”‚
â””â”€ âœ… quote.crazyaigc.com (æŠ¥ä»·ç³»ç»Ÿ) - V3.0 æ¶æ„
    â”œâ”€ å‰ç«¯: Vite + React é™æ€æ–‡ä»¶ (Nginx ç›´æ¥æœåŠ¡)
    â”œâ”€ åç«¯: Go API :8083 (Systemd ç®¡ç†)
    â”œâ”€ æ¡†æ¶: Vite + React + Go
    â”œâ”€ SSLè¯ä¹¦: æœ‰æ•ˆæœŸè‡³ 2026-04-27
    â””â”€ çŠ¶æ€: âœ… åœ¨çº¿è¿è¡Œ

ğŸ“ Vercel (äº‘ç«¯éƒ¨ç½²å¹³å°)
â”œâ”€ âœ… www.crazyaigc.com (å®˜ç½‘) - Next.js SSR
â”‚   â”œâ”€ æ¡†æ¶: Next.js
â”‚   â”œâ”€ çŠ¶æ€: âœ… åœ¨çº¿è¿è¡Œ
â”‚   â””â”€ éƒ¨ç½²: Vercelè‡ªåŠ¨éƒ¨ç½²

ğŸš§ å¼€å‘ä¸­ç³»ç»Ÿ:
â”œâ”€ study.crazyaigc.com (çŸ¥è¯†åº“ç³»ç»Ÿ) - V1.0 æ¶æ„
â”‚   â””â”€ çŠ¶æ€: ğŸš§ å¼€å‘ä¸­ (å¾…éƒ¨ç½²åˆ°Vercel)
â”‚
â””â”€ crm.crazyaigc.com (å®¢æˆ·ç®¡ç†ç³»ç»Ÿ) - V1.0 æ¶æ„
    â””â”€ çŠ¶æ€: ğŸš§ å¼€å‘ä¸­ (å¾…éƒ¨ç½²åˆ°Vercel)
```

---

## ğŸ—ï¸ V3.0 æ¶æ„æ ‡å‡†ï¼ˆå¼ºåˆ¶ï¼‰

### æ ¸å¿ƒæ¶æ„ï¼šå‰åç«¯åˆ†ç¦»

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    V3.0 æ ‡å‡†æ¶æ„                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ¯ä¸ªä¸šåŠ¡ç³»ç»Ÿ = ç‹¬ç«‹ä»“åº“ + å‰åç«¯åˆ†ç¦»

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ä»“åº“æ ¹ç›®å½• (example-business)       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”œâ”€â”€ frontend/        â† Next.js å‰ç«¯ â”‚
â”‚  â”‚   â”œâ”€â”€ src/                      â”‚
â”‚  â”‚   â”œâ”€â”€ package.json              â”‚
â”‚  â”‚   â””â”€â”€ next.config.js            â”‚
â”‚  â”‚                                  â”‚
â”‚  â”œâ”€â”€ backend/         â† Go åç«¯     â”‚
â”‚  â”‚   â”œâ”€â”€ cmd/server/main.go        â”‚
â”‚  â”‚   â”œâ”€â”€ internal/                 â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ handler/              â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ service/              â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ repository/           â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ middleware/           â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ models/               â”‚
â”‚  â”‚   â”‚   â””â”€â”€ config/               â”‚
â”‚  â”‚   â”œâ”€â”€ go.mod                    â”‚
â”‚  â”‚   â””â”€â”€ Dockerfile                â”‚
â”‚  â”‚                                  â”‚
â”‚  â””â”€â”€ prisma/          â† æ•°æ®åº“æ¨¡å‹  â”‚
â”‚      â””â”€â”€ schema.prisma              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ€æœ¯æ ˆæ ‡å‡†ï¼ˆå¼ºåˆ¶ï¼‰

#### å‰ç«¯æŠ€æœ¯æ ˆ

**Vite + React (æ¨èï¼ŒV3.0 æ ‡å‡†)**
```
âœ… æ„å»ºå·¥å…·: Vite 6+
âœ… æ¡†æ¶: React 19+
âœ… è¯­è¨€: TypeScript 5+
âœ… è·¯ç”±: React Router 6+
âœ… æ ·å¼: Tailwind CSS
âœ… çŠ¶æ€ç®¡ç†: Zustand / React Context
âœ… HTTP å®¢æˆ·ç«¯: Axios / Fetch API
âœ… ç»„ä»¶åº“: Radix UI / shadcn/ui / Material-UI
âœ… è¡¨å•å¤„ç†: React Hook Form
```

**Next.js (ä»…ç”¨äºéœ€è¦ SSR çš„ç³»ç»Ÿ)**
```
âœ… æ¡†æ¶: Next.js 15+ (App Router)
âœ… è¯­è¨€: TypeScript 5+
âœ… æ ·å¼: Tailwind CSS
âœ… çŠ¶æ€ç®¡ç†: React Context / Zustand
âœ… HTTP å®¢æˆ·ç«¯: Axios / Fetch API
âœ… è¡¨å•å¤„ç†: React Hook Form
```

**æ¶æ„é€‰æ‹©åŸåˆ™**:
- **Vite + React**: é€‚ç”¨äºæ‰€æœ‰ V3.0 ä¸šåŠ¡ç³»ç»Ÿï¼ˆè´¦å·ä¸­å¿ƒã€PRã€Pixel ç­‰ï¼‰ï¼Œæ€§èƒ½æ›´å¥½ï¼Œéƒ¨ç½²æ›´ç®€å•
- **Next.js**: ä»…ç”¨äºéœ€è¦ SEO æˆ– SSR çš„ç‰¹æ®Šåœºæ™¯

#### åç«¯æŠ€æœ¯æ ˆ
```
âœ… è¯­è¨€: Go 1.21+
âœ… æ¡†æ¶: Gin (github.com/gin-gonic/gin)
âœ… ORM: GORM (gorm.io/gorm)
âœ… æ•°æ®åº“é©±åŠ¨: PostgreSQL (gorm.io/driver/postgres)
âœ… è®¤è¯: JWT (github.com/golang-jwt/jwt/v5)
âœ… å¯†ç åŠ å¯†: bcrypt (golang.org/x/crypto/bcrypt)
âœ… é…ç½®ç®¡ç†: godotenv (github.com/joho/godotenv)
âœ… æ—¥å¿—: Zap (go.uber.org/zap) - æ¨è
```

#### æ•°æ®åº“æ ‡å‡†
```
âœ… æ•°æ®åº“: PostgreSQL 15+
âœ… ä¸»é”®ç±»å‹: UUID (ä¸æ˜¯ Auto Increment INT)
âœ… åˆ—å‘½å: snake_case (ä¸æ˜¯ camelCase)
âœ… æ—¶é—´æˆ³: timestamp with time zone
âœ… JSON å­—æ®µ: JSONB (PostgreSQL)
```

---

## ğŸ“ ä»£ç è§„èŒƒï¼ˆå¼ºåˆ¶æ‰§è¡Œï¼‰

### 1. å‘½åè§„èŒƒ

#### æ•°æ®åº“å‘½åï¼ˆPostgreSQLï¼‰

**å¼ºåˆ¶è§„åˆ™**ï¼š
- âœ… **è¡¨å**: `snake_case`ï¼Œå¤æ•°å½¢å¼
  ```sql
  users          -- âœ… æ­£ç¡®
  user_accounts  -- âœ… æ­£ç¡®
  userAccounts   -- âŒ é”™è¯¯
  User           -- âŒ é”™è¯¯
  ```

- âœ… **åˆ—å**: `snake_case`ï¼Œå…¨éƒ¨å°å†™
  ```sql
  user_id        -- âœ… æ­£ç¡®
  created_at     -- âœ… æ­£ç¡®
  phone_number   -- âœ… æ­£ç¡®
  userId         -- âŒ é”™è¯¯
  CreatedAt      -- âŒ é”™è¯¯
  ```

- âœ… **ä¸»é”®**: `{table}_id` æˆ– `id` (UUID)
  ```sql
  -- æ–¹å¼1: è¡¨å_id (æ¨èç”¨äºå¤–é”®)
  users.user_id          UUID PRIMARY KEY
  user_accounts.id       UUID PRIMARY KEY
  sessions.user_id       UUID REFERENCES users(user_id)

  -- æ–¹å¼2: id (æ¨èç”¨äºä¸»è¡¨)
  users.id               UUID PRIMARY KEY
  user_accounts.user_id  UUID REFERENCES users(id)
  ```

- âœ… **æ—¶é—´æˆ³**: `{column}_at` (timestamp) æˆ– `{column}_time` (time)
  ```sql
  created_at     TIMESTAMP WITH TIME ZONE
  updated_at     TIMESTAMP WITH TIME ZONE
  deleted_at     TIMESTAMP WITH TIME ZONE
  expires_at     TIMESTAMP WITH TIME ZONE
  ```

- âœ… **å¸ƒå°”å€¼**: `is_{adjective}` æˆ– `{verb}_ed`
  ```sql
  is_active      BOOLEAN
  is_verified    BOOLEAN
  is_deleted     BOOLEAN
  published      BOOLEAN
  ```

#### Go ä»£ç å‘½å

**å¼ºåˆ¶è§„åˆ™**ï¼š
- âœ… **ç»“æ„ä½“å**: `PascalCase` (å•æ•°)
  ```go
  type User struct { }         // âœ… æ­£ç¡®
  type UserAccount struct { }  // âœ… æ­£ç¡®
  type user struct { }         // âŒ é”™è¯¯
  ```

- âœ… **å­—æ®µå (JSON)**: `camelCase` (å¯¼å‡ºå­—æ®µ)
  ```go
  type User struct {
      UserID       string    `json:"userId"`        // âœ… æ­£ç¡®
      PhoneNumber  string    `json:"phoneNumber"`   // âœ… æ­£ç¡®
      CreatedAt    time.Time `json:"createdAt"`     // âœ… æ­£ç¡®
  }
  ```

- âœ… **GORM åˆ—æ˜ å°„**: **å¿…é¡»**ä½¿ç”¨ `column` æ ‡ç­¾æŒ‡å®š snake_case
  ```go
  type User struct {
      UserID       string    `gorm:"primaryKey;column:user_id;type:uuid" json:"userId"`
      UnionID      string    `gorm:"uniqueIndex;column:union_id;type:varchar(255)" json:"unionId"`
      PhoneNumber  string    `gorm:"uniqueIndex;column:phone_number;type:varchar(255)" json:"phoneNumber"`
      CreatedAt    time.Time `gorm:"column:created_at;type:timestamp with time zone" json:"createdAt"`
  }
  ```

- âœ… **å‡½æ•°å**: `PascalCase` (å¯¼å‡º) æˆ– `camelCase` (ç§æœ‰)
  ```go
  func GetUserByID(id string) (*User, error) { }  // âœ… æ­£ç¡®
  func validateToken(token string) error { }       // âœ… æ­£ç¡®
  ```

- âœ… **å¸¸é‡**: `PascalCase` æˆ– `UPPER_SNAKE_CASE`
  ```go
  const MaxRetryCount = 3              // âœ… æ­£ç¡®
  const DEFAULT_TIMEOUT = 30 * time.Second  // âœ… æ­£ç¡®
  ```

#### TypeScript/React ä»£ç å‘½å

**å¼ºåˆ¶è§„åˆ™**ï¼š
- âœ… **ç»„ä»¶å**: `PascalCase`
  ```tsx
  function UserProfile() { }           // âœ… æ­£ç¡®
  function userProfile() { }           // âŒ é”™è¯¯
  const UserProfile = () => { }        // âœ… æ­£ç¡®
  ```

- âœ… **æ–‡ä»¶å**:
  - ç»„ä»¶æ–‡ä»¶: `PascalCase.tsx`
    ```
    UserProfile.tsx      // âœ… æ­£ç¡®
    user-profile.tsx     // âŒ é”™è¯¯
    ```

  - å·¥å…·æ–‡ä»¶: `camelCase.ts`
    ```
    authUtils.ts         // âœ… æ­£ç¡®
    auth-utils.ts        // âŒ é”™è¯¯
    ```

  - ç±»å‹æ–‡ä»¶: `camelCase.types.ts`
    ```
    user.types.ts        // âœ… æ­£ç¡®
    userTypes.ts         // âš ï¸  å¯æ¥å—
    ```

- âœ… **æ¥å£/ç±»å‹**: `PascalCase`
  ```typescript
  interface User { }               // âœ… æ­£ç¡®
  interface UserProfile { }        // âœ… æ­£ç¡®
  type UserID = string;            // âœ… æ­£ç¡®
  ```

### 2. API è®¾è®¡è§„èŒƒ

#### RESTful API æ ‡å‡†ï¼ˆå¼ºåˆ¶ï¼‰

**åŸºç¡€è§„åˆ™**ï¼š
- âœ… ä½¿ç”¨åè¯å¤æ•°: `/api/users`, `/api/tickets`
- âœ… HTTP æ–¹æ³•è¯­ä¹‰åŒ–:
  - `GET` - æŸ¥è¯¢
  - `POST` - åˆ›å»º
  - `PUT` - å®Œæ•´æ›´æ–°
  - `PATCH` - éƒ¨åˆ†æ›´æ–°
  - `DELETE` - åˆ é™¤

**URL è®¾è®¡ç¤ºä¾‹**ï¼š
```
# ç”¨æˆ·èµ„æº
GET    /api/users              - è·å–ç”¨æˆ·åˆ—è¡¨ (åˆ†é¡µ)
GET    /api/users/:id          - è·å–å•ä¸ªç”¨æˆ·
POST   /api/users              - åˆ›å»ºç”¨æˆ·
PUT    /api/users/:id          - å®Œæ•´æ›´æ–°ç”¨æˆ·
PATCH  /api/users/:id          - éƒ¨åˆ†æ›´æ–°ç”¨æˆ·
DELETE /api/users/:id          - åˆ é™¤ç”¨æˆ·

# åµŒå¥—èµ„æº
GET    /api/users/:id/tickets      - è·å–ç”¨æˆ·çš„ tickets
POST   /api/users/:id/tickets      - ä¸ºç”¨æˆ·åˆ›å»º ticket
GET    /api/tickets/:id/comments   - è·å– ticket çš„è¯„è®º

# ç‰¹æ®Šæ“ä½œ (ä½¿ç”¨åŠ¨è¯)
POST   /api/auth/login         - ç™»å½•
POST   /api/auth/logout        - ç™»å‡º
POST   /api/users/:id/verify   - éªŒè¯ç”¨æˆ·
```

#### å“åº”æ ¼å¼æ ‡å‡†ï¼ˆå¼ºåˆ¶ï¼‰

**æˆåŠŸå“åº”**ï¼š
```json
{
  "success": true,
  "data": {
    "userId": "uuid-xxx",
    "userName": "å¼ ä¸‰"
  }
}
```

**åˆ—è¡¨å“åº”**ï¼š
```json
{
  "success": true,
  "data": [...],
  "pagination": {
    "page": 1,
    "pageSize": 20,
    "total": 100
  }
}
```

**é”™è¯¯å“åº”**ï¼š
```json
{
  "success": false,
  "error": "é”™è¯¯ä¿¡æ¯ï¼ˆç”¨æˆ·å¯è¯»ï¼‰",
  "errorCode": "USER_NOT_FOUND",
  "details": {}
}
```

#### HTTP çŠ¶æ€ç ä½¿ç”¨ï¼ˆå¼ºåˆ¶ï¼‰

```
200 OK          - æŸ¥è¯¢æˆåŠŸ
201 Created     - åˆ›å»ºæˆåŠŸ
204 No Content  - åˆ é™¤æˆåŠŸ

400 Bad Request         - è¯·æ±‚å‚æ•°é”™è¯¯
401 Unauthorized        - æœªè®¤è¯
403 Forbidden           - æ— æƒé™
404 Not Found           - èµ„æºä¸å­˜åœ¨
409 Conflict            - èµ„æºå†²çª (å¦‚é‡å¤åˆ›å»º)
422 Unprocessable Entity - å‚æ•°éªŒè¯å¤±è´¥

500 Internal Server Error - æœåŠ¡å™¨é”™è¯¯
503 Service Unavailable  - æœåŠ¡ç»´æŠ¤ä¸­
```

### 3. æ•°æ®åº“è®¾è®¡è§„èŒƒï¼ˆå¼ºåˆ¶ï¼‰

#### ä¸»é”®è§„èŒƒ
```sql
-- âœ… å¼ºåˆ¶ä½¿ç”¨ UUID
CREATE TABLE users (
  user_id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  -- æˆ–
  id UUID PRIMARY KEY DEFAULT gen_random_uuid()
);

-- âŒ ç¦æ­¢ä½¿ç”¨è‡ªå¢ ID
CREATE TABLE users (
  id SERIAL PRIMARY KEY  -- âŒ é”™è¯¯
);
```

#### å¤–é”®è§„èŒƒ
```sql
-- âœ… å¤–é”®å‘½å: {referenced_table}_{referenced_column}
CREATE TABLE user_accounts (
  id UUID PRIMARY KEY,
  user_id UUID NOT NULL,
  CONSTRAINT user_accounts_user_id_fkey
    FOREIGN KEY (user_id)
    REFERENCES users(user_id)
    ON UPDATE CASCADE
    ON DELETE CASCADE
);

-- âœ… ç´¢å¼•å‘½å: {table}_{column}_idx
CREATE INDEX user_accounts_user_id_idx
  ON user_accounts(user_id);

-- âœ… å”¯ä¸€çº¦æŸ: {table}_{column}_key
ALTER TABLE users
  ADD CONSTRAINT users_phone_number_key
  UNIQUE (phone_number);
```

#### æ—¶é—´æˆ³è§„èŒƒ
```sql
-- âœ… æ ‡å‡†æ—¶é—´æˆ³å­—æ®µ
CREATE TABLE users (
  -- ...
  created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT NOW()
);

-- âœ… è½¯åˆ é™¤
ALTER TABLE users ADD COLUMN deleted_at TIMESTAMP WITH TIME ZONE;

-- âœ… è¿‡æœŸæ—¶é—´
CREATE TABLE sessions (
  expires_at TIMESTAMP WITH TIME ZONE NOT NULL
);
```

#### JSON å­—æ®µè§„èŒƒ
```sql
-- âœ… ä½¿ç”¨ JSONB (ä¸æ˜¯ JSON)
CREATE TABLE users (
  metadata JSONB,           -- âœ… æ­£ç¡®
  preferences JSONB         -- âœ… æ­£ç¡®
);

-- âŒ é¿å…
metadata JSON              -- âŒ ä½¿ç”¨ JSONB
```

---

## ğŸ—„ï¸ æ•°æ®åº“æ¶æ„è§„èŒƒ

### ç»Ÿä¸€æ•°æ®åº“æœåŠ¡å™¨ï¼ˆæ­å·ï¼‰

**âš ï¸ auth-center è¯¦ç»†å®ç°**ï¼š
- æ•°æ®åº“è¡¨ç»“æ„ã€API è·¯ç”±ã€åç«¯ç›®å½•ç»“æ„ç­‰è¯¦ç»†ä¿¡æ¯è¯·æŸ¥çœ‹ **auth-center/README.md**
- auth-center ä½¿ç”¨ **GORM**ï¼ˆä¸ä½¿ç”¨ Prismaï¼‰

---

**æœåŠ¡å™¨ä¿¡æ¯**ï¼š
```
IP: 47.110.82.96
æ•°æ®åº“: PostgreSQL 15 (Docker)
ç«¯å£: 5432
ç”¨é€”: ç»Ÿä¸€æ•°æ®å­˜å‚¨ä¸­å¿ƒ
```

**âš ï¸ é‡è¦ï¼šæ•°æ®åº“è¿æ¥é…ç½®è§„èŒƒ**

**ç½‘ç»œæ¶æ„**ï¼š
- ä¸Šæµ·æœåŠ¡å™¨**å¯ä»¥**ç›´è¿æ­å·æœåŠ¡å™¨çš„ `47.110.82.96:5432`ï¼ˆå»¶è¿Ÿçº¦13msï¼‰
- **ä½†å¼ºçƒˆæ¨èä½¿ç”¨ SSH éš§é“**ï¼ˆæ›´å®‰å…¨ã€å·²é…ç½®å¥½ï¼‰

**ä¸¤ç§è¿æ¥æ–¹å¼å¯¹æ¯”**ï¼š

| æ–¹å¼ | è¿æ¥å­—ç¬¦ä¸² | ä¼˜ç‚¹ | ç¼ºç‚¹ | æ¨èåº¦ |
|------|-----------|------|------|--------|
| **SSHéš§é“** | `postgresql://nexus:nexus123@localhost:5432/db?sslmode=disable` | âœ… åŠ å¯†ä¼ è¾“<br>âœ… å¯†é’¥è®¤è¯<br>âœ… ç«¯å£ä¸æš´éœ² | âŒ å¤šä¸€ä¸ªSSHè¿›ç¨‹ | â­â­â­â­â­ å¼ºçƒˆæ¨è |
| **ç›´è¿** | `postgresql://nexus:nexus123@47.110.82.96:5432/db?sslmode=require` | âœ… æ€§èƒ½ç•¥å¥½(~3%)<br>âœ… é…ç½®ç®€å• | âŒ éœ€é…ç½®SSL<br>âŒ ç«¯å£æš´éœ² | â­â­â­ å¯æ¥å— |

**âš ï¸ å®‰å…¨è­¦å‘Š**ï¼š
```bash
# âŒ å±é™©ï¼šç›´è¿ä¸”ä¸ä½¿ç”¨SSL
DATABASE_URL=postgresql://nexus:nexus123@47.110.82.96:5432/db?sslmode=disable
# å¯†ç å’Œæ•°æ®éƒ½æ˜¯æ˜æ–‡ä¼ è¾“ï¼
```

**ç»Ÿä¸€é…ç½®ï¼ˆæ‰€æœ‰V3.0ç³»ç»Ÿï¼‰**ï¼š
```bash
# PostgreSQLæ•°æ®åº“è¿æ¥é…ç½®
ä¸»æœº:   localhost (é€šè¿‡SSHéš§é“è½¬å‘)
ç«¯å£:   5432
æ•°æ®åº“ç”¨æˆ·: nexus (PostgreSQLè¶…çº§ç”¨æˆ·)
æ•°æ®åº“å¯†ç : nexus123
SSLæ¨¡å¼: disable (SSHéš§é“å·²åŠ å¯†ï¼Œæ•°æ®åº“å±‚å¯disable)
è¿æ¥å­—ç¬¦ä¸²: postgresql://nexus:nexus123@localhost:5432/æ•°æ®åº“å?sslmode=disable
```

**âš ï¸ ç”¨æˆ·è¯´æ˜**ï¼š
- `nexus` æ˜¯ **PostgreSQLæ•°æ®åº“ç”¨æˆ·**ï¼Œä¸æ˜¯æ“ä½œç³»ç»Ÿç”¨æˆ·
- æ“ä½œç³»ç»Ÿç”¨æˆ·ï¼ˆubuntuã€rootï¼‰ç”¨äºSSHç™»å½•
- æ•°æ®åº“ç”¨æˆ·ï¼ˆnexusï¼‰ç”¨äºPostgreSQLè¿æ¥

**å¼ºåˆ¶è§„åˆ™**ï¼š
- âœ… **å¿…é¡»ä½¿ç”¨ `localhost:5432`**ï¼ˆé€šè¿‡SSHéš§é“ï¼‰
- âœ… **å¿…é¡»ä½¿ç”¨æ•°æ®åº“ç”¨æˆ· `nexus`**
- âœ… **å¿…é¡»ä½¿ç”¨ `sslmode=disable`**ï¼ˆSSHéš§é“å·²åŠ å¯†ï¼‰
- âœ… **å¿…é¡»ç¡®ä¿SSHéš§é“è¿è¡Œ**ï¼ˆè§ä¸‹æ–¹ï¼‰

**é”™è¯¯ç¤ºä¾‹ï¼ˆä¸è¦è¿™æ ·é…ç½®ï¼‰**ï¼š
```bash
# âŒ é”™è¯¯1ï¼šç›´è¿ä¸”ä¸ç”¨SSLï¼ˆä¸å®‰å…¨ï¼‰
DATABASE_URL=postgresql://nexus:nexus123@47.110.82.96:5432/db?sslmode=disable

# âŒ é”™è¯¯2ï¼šä½¿ç”¨ä¸“ç”¨æ•°æ®åº“ç”¨æˆ·
DATABASE_URL=postgresql://pr_business_user:pass@localhost:5432/db?sslmode=disable
# ç»“æœï¼šå¯†ç è®¤è¯å¤±è´¥ï¼ˆç”¨æˆ·æƒé™é—®é¢˜ï¼‰
```

**æ­£ç¡®é…ç½®**ï¼š
```bash
# âœ… æ­£ç¡®ï¼šé€šè¿‡SSHéš§é“ + nexusç”¨æˆ·
DATABASE_URL=postgresql://nexus:nexus123@localhost:5432/æ•°æ®åº“å?sslmode=disable
```

---

### SSHéš§é“è®¾ç½®ï¼ˆå¿…é¡»æ‰§è¡Œï¼‰

**åœ¨ä¸Šæµ·æœåŠ¡å™¨ä¸Šæ‰§è¡Œ**ï¼ˆé¦–æ¬¡éƒ¨ç½²æ—¶æ‰§è¡Œä¸€æ¬¡ï¼‰ï¼š

```bash
# 1. åˆ›å»ºsystemdæœåŠ¡
sudo tee /etc/systemd/system/pg-tunnel.service <<EOF
[Unit]
Description=PostgreSQL SSH Tunnel to Hangzhou
After=network.target

[Service]
User=ubuntu
ExecStart=/usr/bin/ssh -N -o StrictHostKeyChecking=no -o ServerAliveInterval=60 -o ServerAliveCountMax=3 -L 5432:localhost:5432 hangzhou-ali
Restart=always
RestartSec=5

[Install]
WantedBy=multi-user.target
EOF

# 2. å¯åŠ¨æœåŠ¡
sudo systemctl daemon-reload
sudo systemctl enable pg-tunnel
sudo systemctl start pg-tunnel

# 3. éªŒè¯éš§é“çŠ¶æ€
sudo systemctl status pg-tunnel
# åº”è¯¥çœ‹åˆ°: Active: active (running)

# 4. æµ‹è¯•è¿æ¥
PGPASSWORD=nexus123 psql -h localhost -p 5432 -U nexus -d postgres -c 'SELECT 1;'
# åº”è¯¥è¾“å‡º: ?column?
#              ----------
#                      1
```

**SSHé…ç½®ï¼ˆ`~/.ssh/config`ï¼‰**ï¼š
```bash
Host hangzhou-ali
    HostName 47.110.82.96
    User root
    IdentityFile ~/.ssh/xia_mac_alicloud_local
    StrictHostKeyChecking no
    ServerAliveInterval 60
    ServerAliveCountMax 3
```

**SSHéš§é“è¯´æ˜**ï¼š
- âœ… åå°è¿è¡Œï¼Œè‡ªåŠ¨é‡è¿
- âœ… å¼€æœºè‡ªåŠ¨å¯åŠ¨
- âœ… å°†æœ¬åœ° 5432 ç«¯å£è½¬å‘åˆ°æ­å·æœåŠ¡å™¨çš„ 5432 ç«¯å£
- âœ… æ‰€æœ‰åº”ç”¨é€šè¿‡ `localhost:5432` è¿æ¥
- âœ… å¿ƒè·³æ£€æµ‹ï¼ˆ60ç§’é—´éš”ï¼‰ï¼Œæ–­çº¿è‡ªåŠ¨é‡è¿

---

### SSHé…ç½®è§„èŒƒï¼ˆå¼ºåˆ¶ï¼‰

**âš ï¸ é‡è¦ï¼šåŒºåˆ†æ“ä½œç³»ç»Ÿç”¨æˆ·å’Œæ•°æ®åº“ç”¨æˆ·**

æœ¬æ–‡æ¡£æ¶‰åŠçš„"ç”¨æˆ·"æœ‰ä¸¤ä¸ªå±‚é¢ï¼š
1. **æ“ä½œç³»ç»Ÿç”¨æˆ·**ï¼šç”¨äºSSHç™»å½•æœåŠ¡å™¨ï¼ˆubuntuã€rootï¼‰
2. **æ•°æ®åº“ç”¨æˆ·**ï¼šç”¨äºPostgreSQLè¿æ¥ï¼ˆnexusï¼‰

æœ¬ç« èŠ‚è¯´æ˜çš„æ˜¯**æ“ä½œç³»ç»Ÿç”¨æˆ·**çš„SSHé…ç½®ã€‚

---

#### å¼€å‘è€…æœ¬åœ°SSHé…ç½®ï¼ˆ`~/.ssh/config`ï¼‰

**æ‰€æœ‰å¼€å‘äººå‘˜çš„Macæœ¬åœ°å¿…é¡»é…ç½®**ï¼š

```bash
# ç¼–è¾‘æœ¬åœ°SSHé…ç½®
nano ~/.ssh/config
```

**æ·»åŠ ä»¥ä¸‹é…ç½®**ï¼š

```bash
# ===== ä¸Šæµ·åº”ç”¨æœåŠ¡å™¨ =====
Host shanghai-tencent
    HostName 101.35.120.199
    User ubuntu                    # æ“ä½œç³»ç»Ÿç”¨æˆ·
    IdentityFile ~/.ssh/id_ed25519
    # æˆ–ä½¿ç”¨RSAå¯†é’¥: IdentityFile ~/.ssh/id_rsa
    StrictHostKeyChecking no
    ServerAliveInterval 60
    ServerAliveCountMax 3

# ===== æ­å·æ•°æ®åº“æœåŠ¡å™¨ =====
Host hangzhou-ali
    HostName 47.110.82.96
    User root                      # æ“ä½œç³»ç»Ÿç”¨æˆ·ï¼ˆç®¡ç†å‘˜ï¼‰
    IdentityFile ~/.ssh/xia_mac_alicloud_local
    StrictHostKeyChecking no
    ServerAliveInterval 60
    ServerAliveCountMax 3
```

**é…ç½®è¯´æ˜**ï¼š
- âœ… ä½¿ç”¨åˆ«åï¼ˆ`shanghai-tencent`ã€`hangzhou-ali`ï¼‰
- âœ… æŒ‡å®šæ“ä½œç³»ç»Ÿç”¨æˆ·ï¼ˆ`User ubuntu` / `User root`ï¼‰
- âœ… ä½¿ç”¨å¯†é’¥è®¤è¯ï¼ˆ`IdentityFile`ï¼‰
- âœ… å¯ç”¨ä¿æ´»æœºåˆ¶ï¼ˆ`ServerAliveInterval`ï¼‰
- âœ… ç¦ç”¨ä¸»æœºå¯†é’¥æ£€æŸ¥ï¼ˆå†…ç½‘ç¯å¢ƒå¯å®‰å…¨ç¦ç”¨ï¼‰

**âš ï¸ æ³¨æ„**ï¼š
- `User` å­—æ®µæŒ‡å®šçš„æ˜¯**æ“ä½œç³»ç»Ÿç”¨æˆ·**ï¼Œä¸æ˜¯æ•°æ®åº“ç”¨æˆ·
- æ•°æ®åº“ç”¨æˆ·ï¼ˆ`nexus`ï¼‰åœ¨åº”ç”¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šï¼ˆè§"å„ç³»ç»Ÿæ ‡å‡†é…ç½®"ï¼‰

#### ä½¿ç”¨æ–¹å¼ï¼ˆå¼ºåˆ¶ï¼‰

**âœ… æ­£ç¡®æ–¹å¼**ï¼š
```bash
# è¿æ¥ä¸Šæµ·æœåŠ¡å™¨
ssh shanghai-tencent

# è¿æ¥æ­å·æœåŠ¡å™¨
ssh hangzhou-ali

# ä¸Šä¼ æ–‡ä»¶
scp bin/server shanghai-tencent:/var/www/auth-center-backend/

# æ‰§è¡Œè¿œç¨‹å‘½ä»¤
ssh shanghai-tencent "sudo systemctl restart auth-center-backend"
```

**âŒ ç¦æ­¢çš„æ–¹å¼**ï¼š
```bash
# âŒ ä¸è¦ç›´æ¥ç”¨IP
ssh ubuntu@101.35.120.199

# âŒ ä¸è¦æ¯æ¬¡è¾“å…¥å¯†ç ï¼ˆåº”è¯¥é…ç½®å¯†é’¥è®¤è¯ï¼‰
ssh ubuntu@101.35.120.199

# âŒ ä¸è¦ç”¨ä¸åŒçš„åˆ«å
ssh shanghai
ssh prod
```

#### æœåŠ¡å™¨ä¹‹é—´çš„SSHé…ç½®

**ä¸Šæµ·æœåŠ¡å™¨**ï¼ˆå·²é…ç½®ï¼Œæ— éœ€ä¿®æ”¹ï¼‰ï¼š
```bash
# æ–‡ä»¶ï¼š/home/ubuntu/.ssh/config
Host hangzhou-ali
    HostName 47.110.82.96
    User root
    IdentityFile ~/.ssh/xia_mac_alicloud_local
    StrictHostKeyChecking no
    ServerAliveInterval 60
    ServerAliveCountMax 3
```

æ­¤é…ç½®ç”¨äºï¼š
- âœ… SSHéš§é“åˆ°æ­å·æ•°æ®åº“ï¼ˆpg-tunnel.serviceï¼‰
- âœ… æœåŠ¡å™¨é—´æ–‡ä»¶ä¼ è¾“
- âœ… è¿œç¨‹æ•°æ®åº“ç®¡ç†

#### SSHå¯†é’¥ç®¡ç†

**å¯†é’¥ä½ç½®**ï¼š
- å¼€å‘è€…æœ¬åœ°ï¼š`~/.ssh/id_ed25519` æˆ– `~/.ssh/id_rsa`
- æœåŠ¡å™¨é—´ï¼š`~/.ssh/xia_mac_alicloud_local`ï¼ˆæ­å·æœåŠ¡å™¨ä¸“ç”¨ï¼‰

**å¯†é’¥æƒé™**ï¼ˆå¿…é¡»è®¾ç½®ï¼‰ï¼š
```bash
chmod 600 ~/.ssh/config
chmod 600 ~/.ssh/id_ed25519
chmod 644 ~/.ssh/id_ed25519.pub
```

#### å¸¸è§é—®é¢˜

**Q: ä¸ºä»€ä¹ˆè¦ç”¨SSHåˆ«åï¼Ÿ**
A:
1. ç»Ÿä¸€å›¢é˜Ÿåä½œæ–¹å¼
2. é¿å…IPç¡¬ç¼–ç ï¼ˆIPå¯èƒ½å˜åŒ–ï¼‰
3. å‘½ä»¤æ›´ç®€æ´æ˜“è¯»
4. ä¾¿äºè„šæœ¬è‡ªåŠ¨åŒ–

**Q: å¦‚ä½•æµ‹è¯•SSHè¿æ¥ï¼Ÿ**
```bash
# æµ‹è¯•ä¸Šæµ·æœåŠ¡å™¨
ssh shanghai-tencent "hostname && echo 'è¿æ¥æˆåŠŸ'"

# æµ‹è¯•æ­å·æœåŠ¡å™¨
ssh hangzhou-ali "hostname && echo 'è¿æ¥æˆåŠŸ'"
```

**Q: å¯†é’¥è®¤è¯ä¸å·¥ä½œæ€ä¹ˆåŠï¼Ÿ**
```bash
# 1. æ£€æŸ¥æœ¬åœ°å¯†é’¥æ˜¯å¦å­˜åœ¨
ls -la ~/.ssh/id_*

# 2. å°†å…¬é’¥å¤åˆ¶åˆ°æœåŠ¡å™¨
ssh-copy-id -i ~/.ssh/id_ed25519.pub ubuntu@101.35.120.199

# 3. æˆ–æ‰‹åŠ¨æ·»åŠ 
cat ~/.ssh/id_ed25519.pub | ssh shanghai-tencent "mkdir -p ~/.ssh && cat >> ~/.ssh/authorized_keys"
```

---

### å„ç³»ç»Ÿæ ‡å‡†é…ç½®

#### 1. è´¦å·ä¸­å¿ƒ

**æ–‡ä»¶**: `/Users/xia/Documents/GitHub/auth-center/.env`

```bash
AUTH_CENTER_DATABASE_URL="postgresql://nexus:nexus123@localhost:5432/auth_center_db?sslmode=disable"
```

#### 2. PR ä¸šåŠ¡ç³»ç»Ÿ

**æ–‡ä»¶**: `/Users/xia/Documents/GitHub/pr-business/backend/.env.production`

```bash
DATABASE_URL=postgresql://nexus:nexus123@localhost:5432/pr_business_db?sslmode=disable
```

#### 3. Pixel ç³»ç»Ÿ

**æ–‡ä»¶**: `/Users/xia/Documents/GitHub/superpixel/backend/configs/config.yaml`

```yaml
database:
  host: localhost
  port: 5432
  user: nexus
  password: nexus123
  dbname: pixel_business_db
  sslmode: disable
```

#### 4. Study ç³»ç»Ÿï¼ˆå¦‚æœ‰åç«¯ï¼‰

```bash
DATABASE_URL=postgresql://nexus:nexus123@localhost:5432/study_business_db?sslmode=disable
```

#### 5. CRM ç³»ç»Ÿï¼ˆå¦‚æœ‰åç«¯ï¼‰

```bash
DATABASE_URL=postgresql://nexus:nexus123@localhost:5432/crm_business_db?sslmode=disable
```

#### 6. Quote ç³»ç»Ÿï¼ˆæŠ¥ä»·ç³»ç»Ÿï¼‰

```bash
DATABASE_URL=postgresql://nexus:nexus123@localhost:5432/quote_business_db?sslmode=disable
```

---

### æ•°æ®åº“ä¿¡æ¯æ±‡æ€»

**âš ï¸ ç”¨æˆ·ç±»å‹è¯´æ˜**ï¼š
- **æ“ä½œç³»ç»Ÿç”¨æˆ·**ï¼šSSHç™»å½•æœåŠ¡å™¨ï¼ˆubuntuã€rootï¼‰
- **æ•°æ®åº“ç”¨æˆ·**ï¼šPostgreSQLè¿æ¥ï¼ˆnexusã€å…¶ä»–ä¸šåŠ¡ç”¨æˆ·ï¼‰

**æ­å·æœåŠ¡å™¨ä¿¡æ¯**ï¼š
```
IPåœ°å€: 47.110.82.96
SSHç«¯å£: 22
SSHåˆ«å: hangzhou-ali
SSHç™»å½•ç”¨æˆ·ï¼ˆæ“ä½œç³»ç»Ÿï¼‰: root
æ•°æ®åº“ç«¯å£: 5432
æ•°æ®åº“ç”¨æˆ·ï¼ˆPostgreSQLï¼‰: nexusï¼ˆè¶…çº§ç”¨æˆ·ï¼‰
```

**æ•°æ®åº“ç”¨æˆ·å¯†ç æ ‡å‡†ï¼ˆV3.0 ç»Ÿä¸€é…ç½®ï¼‰**ï¼š

| æ•°æ®åº“ç”¨æˆ· | å¯†ç  | ç”¨é€” | è®¿é—®æ•°æ®åº“ | æ¨èåº¦ |
|-----------|------|------|-----------|--------|
| **nexus** (è¶…çº§ç”¨æˆ·) | `nexus123` | æ‰€æœ‰ç³»ç»Ÿç»Ÿä¸€è¿æ¥ | æ‰€æœ‰æ•°æ®åº“ | â­â­â­â­â­ å¼ºçƒˆæ¨è |
| auth_center_user | `AuthCenter2026!` | è´¦å·ä¸­å¿ƒä¸“ç”¨ | auth_center_db | â­â­ å¤‡ç”¨ |
| pr_business_user | `PrBusiness2026!` | PRç³»ç»Ÿä¸“ç”¨ | pr_business_db | â­â­ å¤‡ç”¨ |
| pixel_user | `PixelBusiness2026!` | Pixelç³»ç»Ÿä¸“ç”¨ | pixel_business_db | â­â­ å¤‡ç”¨ |
| quote_user | (å¾…è®¾ç½®) | Quoteç³»ç»Ÿä¸“ç”¨ | quote_business_db | â­â­ å¤‡ç”¨ |
| study_user | (å¾…è®¾ç½®) | Studyç³»ç»Ÿä¸“ç”¨ | study_business_db | â­â­ å¤‡ç”¨ |
| crm_user | (å¾…è®¾ç½®) | CRMç³»ç»Ÿä¸“ç”¨ | crm_business_db | â­â­ å¤‡ç”¨ |

**è¿æ¥å­—ç¬¦ä¸²æ ¼å¼**ï¼š
```bash
# è¶…çº§ç”¨æˆ·è¿æ¥ï¼ˆæ¨èç”¨äºæ‰€æœ‰ V3.0 ç³»ç»Ÿï¼‰
postgresql://nexus:nexus123@localhost:5432/æ•°æ®åº“å?sslmode=disable

# ä¸šåŠ¡ç³»ç»Ÿä¸“ç”¨ç”¨æˆ·ï¼ˆä¸æ¨èï¼Œé™¤éæœ‰ç‰¹æ®Šéœ€æ±‚ï¼‰
postgresql://auth_center_user:AuthCenter2026!@localhost:5432/auth_center_db?sslmode=disable
postgresql://pr_business_user:PrBusiness2026!@localhost:5432/pr_business_db?sslmode=disable
```

**âš ï¸ é‡è¦æç¤º**ï¼š
- æ‰€æœ‰V3.0ç³»ç»Ÿç»Ÿä¸€ä½¿ç”¨ `nexus` ç”¨æˆ·è¿æ¥æ•°æ®åº“
- é¿å…åˆ›å»ºè¿‡å¤šæ•°æ®åº“ç”¨æˆ·ï¼Œå¢åŠ ç®¡ç†å¤æ‚åº¦
- å¦‚éœ€æƒé™éš”ç¦»ï¼Œå¯é€šè¿‡PostgreSQLçš„Row Level Securityå®ç°
- æ‰€æœ‰å¯†ç å·²åœ¨æ­å·æœåŠ¡å™¨ä¸Šè®¾ç½®å®Œæˆï¼ˆ2026-01-31ï¼‰
- ä¸Šæµ·æœåŠ¡å™¨é€šè¿‡SSHéš§é“è¿æ¥ï¼Œå®‰å…¨å¯é 

**å„ç³»ç»Ÿæ•°æ®åº“**ï¼š
```
auth_center_db     - è´¦å·ä¸­å¿ƒ
pr_business_db     - PRä¸šåŠ¡ç³»ç»Ÿ
pixel_business_db  - AIç”Ÿå›¾ç³»ç»Ÿ
study_business_db  - çŸ¥è¯†åº“ç³»ç»Ÿ
crm_business_db    - å®¢æˆ·ç®¡ç†ç³»ç»Ÿ
quote_business_db  - æŠ¥ä»·ç³»ç»Ÿ
```

---

### éƒ¨ç½²éªŒè¯æ£€æŸ¥æ¸…å•

éƒ¨ç½²åå¿…é¡»éªŒè¯ï¼š

- [ ] SSHéš§é“æœåŠ¡è¿è¡Œä¸­ï¼š`sudo systemctl status pg-tunnel`
- [ ] æµ‹è¯•SSHéš§é“ï¼š`psql -h localhost -p 5432 -U nexus -d postgres -c 'SELECT 1;'`
- [ ] åç«¯æ—¥å¿—æ˜¾ç¤º"æ•°æ®åº“è¿æ¥æˆåŠŸ"
- [ ] åº”ç”¨åŠŸèƒ½æ­£å¸¸ï¼Œæ— æ•°æ®åº“é”™è¯¯

---

### å¸¸è§é”™è¯¯æ’æŸ¥

**é”™è¯¯1ï¼šè¿æ¥è¶…æ—¶**
```
connection timeout
```
åŸå› ï¼šSSHéš§é“æœªå¯åŠ¨
è§£å†³ï¼š`sudo systemctl start pg-tunnel`

**é”™è¯¯2ï¼šå¯†ç è®¤è¯å¤±è´¥**
```
password authentication failed for user "nexus"
```
åŸå› ï¼šé…ç½®æ–‡ä»¶ä¸­å¯†ç é”™è¯¯
è§£å†³ï¼šç¡®ä¿å¯†ç æ˜¯ `nexus123`

**é”™è¯¯3ï¼šè¿æ¥è¢«æ‹’ç»**
```
connection refused
```
åŸå› ï¼šSSHéš§é“æœªå¯åŠ¨æˆ–ç«¯å£å ç”¨
è§£å†³ï¼šæ£€æŸ¥ `sudo systemctl status pg-tunnel`

**é”™è¯¯4ï¼šSSLé”™è¯¯**
```
server does not support SSL
```
åŸå› ï¼šä½¿ç”¨äº† `sslmode=require` æˆ– `prefer`
è§£å†³ï¼šä½¿ç”¨ `sslmode=disable`

### æ•°æ®åº“éš”ç¦»ç­–ç•¥

```
PostgreSQL Server (47.110.82.96:5432)
â”‚
â”œâ”€ auth_center_db        -- è´¦å·ä¸­å¿ƒï¼ˆè®¤è¯ä¸“ç”¨ï¼‰
â”œâ”€ pr_business_db        -- PRä¸šåŠ¡ç³»ç»Ÿ
â”œâ”€ pixel_business_db     -- AIç”Ÿå›¾ç³»ç»Ÿ
â”œâ”€ quote_business_db     -- æŠ¥ä»·ç³»ç»Ÿ
â”œâ”€ study_business_db     -- çŸ¥è¯†åº“ç³»ç»Ÿ
â””â”€ crm_business_db       -- å®¢æˆ·ç®¡ç†ç³»ç»Ÿ
```

**å¼ºåˆ¶è§„åˆ™**ï¼š
- âœ… æ¯ä¸ªä¸šåŠ¡ç³»ç»Ÿä½¿ç”¨**ç‹¬ç«‹æ•°æ®åº“**
- âœ… ä¸å…è®¸è·¨åº“æŸ¥è¯¢ï¼ˆåº”ç”¨å±‚Joinï¼‰
- âœ… é€šè¿‡ `auth_center_user_id` å…³è”ç”¨æˆ·èº«ä»½

### ç”¨æˆ·å…³è”è§„èŒƒ

#### auth_center_db.usersï¼ˆç»Ÿä¸€èº«ä»½ï¼‰
```sql
CREATE TABLE users (
  user_id       UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  union_id      VARCHAR(255) UNIQUE,      -- å¾®ä¿¡ unionidï¼ˆè·¨åº”ç”¨ï¼‰
  phone_number  VARCHAR(255) UNIQUE,
  password_hash VARCHAR(255),
  email         VARCHAR(255) UNIQUE,
  created_at    TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at    TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

#### ä¸šåŠ¡æ•°æ®åº“.usersï¼ˆæœ¬åœ°ç”¨æˆ·ï¼‰
```sql
-- pr_business_db.users
CREATE TABLE users (
  id                     VARCHAR(255) PRIMARY KEY,  -- æœ¬åœ° ID (CUID)
  auth_center_user_id    UUID UNIQUE,              -- å…³è”è´¦å·ä¸­å¿ƒ âœ… å¼ºåˆ¶
  union_id               VARCHAR(255) UNIQUE,
  role                   VARCHAR(50),              -- ä¸šåŠ¡è§’è‰²
  profile                JSONB,
  created_at             TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- âœ… å…³é”®ç´¢å¼•
CREATE INDEX users_auth_center_user_id_idx
  ON users(auth_center_user_id);
```

**è·¨ç³»ç»Ÿç”¨æˆ·è¯†åˆ«**ï¼š
```sql
-- é€šè¿‡ auth_center_user_id å…³è”
SELECT
  u.*,
  a.union_id,
  a.phone_number
FROM pr_business_db.users u
JOIN auth_center_db.users a
  ON u.auth_center_user_id = a.user_id
WHERE u.id = 'xxx';
```

---

## ğŸš€ éƒ¨ç½²è§„èŒƒï¼ˆå¼ºåˆ¶ï¼‰

### V3.0 æ ‡å‡†éƒ¨ç½²æ¶æ„

**æ¶æ„ A: Vite + React (æ¨è - æ€§èƒ½æ›´å¥½ï¼Œéƒ¨ç½²æ›´ç®€å•)**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Vite + React ç³»ç»Ÿéƒ¨ç½²æ¶æ„                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ä¸šåŠ¡ç³»ç»Ÿ (example.com)
â”‚
â”œâ”€â”€ Nginx (443/80)
â”‚   â”œâ”€â”€ SSL ç»ˆæ­¢
â”‚   â”œâ”€â”€ é™æ€èµ„æºæœåŠ¡ (Vite æ„å»ºäº§ç‰©)
â”‚   â”‚   â”œâ”€â”€ /          â†’ /var/www/example-frontend/index.html
â”‚   â”‚   â””â”€â”€ /assets/   â†’ é™æ€èµ„æº (1å¹´ç¼“å­˜)
â”‚   â””â”€â”€ åå‘ä»£ç†
â”‚       â””â”€â”€ /api       â†’ Backend (Go :8080)
â”‚
â””â”€â”€ Backend (Go)
    â”œâ”€â”€ ç«¯å£: 8080
    â”œâ”€â”€ è¿è¡Œ: Systemd
    â”œâ”€â”€ åŠŸèƒ½: RESTful API
    â””â”€â”€ è¿æ¥: PostgreSQL (47.110.82.96:5432)
```

**æ¶æ„ B: Next.js (ä»…ç”¨äº SSR åœºæ™¯ï¼Œå·²ä¸å†æ¨èç”¨äºæ–°ç³»ç»Ÿ)**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               Next.js ç³»ç»Ÿéƒ¨ç½²æ¶æ„                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ä¸šåŠ¡ç³»ç»Ÿ (example.com)
â”‚
â”œâ”€â”€ Nginx (443/80)
â”‚   â”œâ”€â”€ SSL ç»ˆæ­¢
â”‚   â”œâ”€â”€ é™æ€èµ„æºæœåŠ¡
â”‚   â””â”€â”€ åå‘ä»£ç†
â”‚       â”œâ”€â”€ /          â†’ Frontend (Next.js :3000)
â”‚       â””â”€â”€ /api       â†’ Backend (Go :8080)
â”‚
â”œâ”€â”€ Frontend (Next.js)
â”‚   â”œâ”€â”€ ç«¯å£: 3000
â”‚   â”œâ”€â”€ è¿è¡Œ: PM2
â”‚   â””â”€â”€ åŠŸèƒ½: SSR + é™æ€é¡µé¢
â”‚
â””â”€â”€ Backend (Go)
    â”œâ”€â”€ ç«¯å£: 8080
    â”œâ”€â”€ è¿è¡Œ: Systemd
    â”œâ”€â”€ åŠŸèƒ½: RESTful API
    â””â”€â”€ è¿æ¥: PostgreSQL (47.110.82.96:5432)
```

**æ³¨æ„**ï¼šæ‰€æœ‰æ–°ç³»ç»Ÿåº”ä½¿ç”¨ **æ¶æ„ A (Vite + React)**ã€‚è´¦å·ä¸­å¿ƒå·²ä» Next.js è¿ç§»åˆ° Vite + Reactã€‚

### éƒ¨ç½²æµç¨‹ï¼ˆæ ‡å‡†ï¼‰

#### âš ï¸ æ ¸å¿ƒåŸåˆ™ï¼šæœ¬åœ°æ„å»ºï¼Œä¸Šä¼ äº§ç‰©

**å¼ºåˆ¶è¦æ±‚**ï¼š
- âœ… **å‰ç«¯å’Œåç«¯éƒ½å¿…é¡»åœ¨æœ¬åœ°æ„å»º**
- âœ… **åªä¸Šä¼ æ„å»ºäº§ç‰©åˆ°æœåŠ¡å™¨**
- âŒ **ç¦æ­¢åœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œæ„å»ºå‘½ä»¤**

**ä¸ºä»€ä¹ˆå¿…é¡»æœ¬åœ°æ„å»ºï¼Ÿ**

1. **ä¸å ç”¨æœåŠ¡å™¨èµ„æº**
   - ç¼–è¯‘éå¸¸æ¶ˆè€— CPU å’Œå†…å­˜
   - æœåŠ¡å™¨èµ„æºå®è´µï¼Œåº”è¯¥ç”¨äºè¿è¡ŒæœåŠ¡
   - æœ¬åœ° Mac æ€§èƒ½é€šå¸¸æ¯”æœåŠ¡å™¨å¼º

2. **æ„å»ºäº§ç‰©å¯é‡ç°**
   - æœ¬åœ°ç¯å¢ƒå¯æ§ï¼ˆä¾èµ–ç‰ˆæœ¬ã€ç¼–è¯‘å™¨ç‰ˆæœ¬ï¼‰
   - é¿å…æœåŠ¡å™¨ç¯å¢ƒå·®å¼‚å¯¼è‡´çš„é—®é¢˜
   - Go äº¤å‰ç¼–è¯‘å·²éªŒè¯å®Œå…¨å¯é 

3. **å®‰å…¨æ€§æ›´å¥½**
   - æœåŠ¡å™¨ä¸éœ€è¦å®‰è£…å¼€å‘å·¥å…·ï¼ˆNode.jsã€Go ç¼–è¯‘å™¨ç­‰ï¼‰
   - å‡å°‘æ”»å‡»é¢
   - æœåŠ¡å™¨åªä¿ç•™å¿…è¦çš„è¿è¡Œæ—¶æ–‡ä»¶

4. **éƒ¨ç½²æ›´å¿«**
   - æœ¬åœ°æ„å»ºå®Œæˆåï¼Œåªéœ€è¦ä¸Šä¼ æ–‡ä»¶
   - é¿å…æœåŠ¡å™¨ç¼–è¯‘è€—æ—¶é•¿
   - å‡å°‘æœåŠ¡ä¸­æ–­æ—¶é—´

---

#### 1. å‰ç«¯éƒ¨ç½²ï¼ˆVite + React - æ¨èï¼Œauth-center ä½¿ç”¨æ­¤æ¶æ„ï¼‰

```bash
# === æœ¬åœ°å¼€å‘ ===
cd frontend-vite/  # æˆ– frontend/

# 1. å®‰è£…ä¾èµ–
npm install

# 2. ç¯å¢ƒé…ç½®
cat > .env.production << EOF
VITE_API_URL=https://os.crazyaigc.com/api
VITE_APP_URL=https://os.crazyaigc.com
EOF

# 3. å¼€å‘ï¼ˆå¯é€‰ï¼‰
npm run dev

# 4. ç±»å‹æ£€æŸ¥ + æ„å»º
npm run build  # tsc -b && vite build

# === éƒ¨ç½²åˆ°æœåŠ¡å™¨ ===

# 5. ä¸Šä¼ æ„å»ºäº§ç‰©ï¼ˆé™æ€æ–‡ä»¶ï¼‰
rsync -avz dist/ shanghai-tencent:/var/www/auth-center-frontend/

# 6. Nginx é…ç½®ï¼ˆç›´æ¥æœåŠ¡é™æ€æ–‡ä»¶ï¼‰
# sudo nginx -t && sudo systemctl reload nginx
```

**auth-center å‰ç«¯æŠ€æœ¯æ ˆ**ï¼š
- Vite 7.2.4
- React 19.2.0
- React Router 7.13.0
- Material-UI 7.3.7
- Tailwind CSS 4.x
- TypeScript 5.9.3

**Nginx é…ç½®ï¼ˆVite é™æ€æ–‡ä»¶ï¼‰**:
```nginx
server {
    listen 443 ssl http2;
    server_name example.com;

    # å‰ç«¯é™æ€æ–‡ä»¶ï¼ˆVite æ„å»ºï¼‰
    location / {
        root /var/www/example-frontend;
        try_files $uri $uri/ /index.html;

        # é™æ€èµ„æºç¼“å­˜
        location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {
            expires 1y;
            add_header Cache-Control "public, immutable";
        }
    }

    # åç«¯ API
    location /api {
        rewrite ^/api/?(.*) /$1 break;
        proxy_pass http://localhost:8080;
        # ... å…¶ä»–ä»£ç†é…ç½®
    }
}
```

#### 2. å‰ç«¯éƒ¨ç½²ï¼ˆNext.js - ä»…ç”¨äº SSR åœºæ™¯ï¼‰

**æ³¨æ„**ï¼šNext.js SSR ä¹Ÿå¿…é¡»åœ¨**æœ¬åœ°æ„å»º**ï¼Œä¸è¦åœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œ `npm install` å’Œ `npm run build`ã€‚

```bash
# === æœ¬åœ°å¼€å‘ ===
cd frontend/

# 1. å®‰è£…ä¾èµ–
npm install

# 2. ç¯å¢ƒé…ç½®
cat > .env.local << EOF
NEXT_PUBLIC_API_URL=https://api.example.com
NEXT_PUBLIC_APP_URL=https://example.com
EOF

# 3. å¼€å‘ï¼ˆå¯é€‰ï¼‰
npm run dev

# 4. ç±»å‹æ£€æŸ¥
npx tsc --noEmit

# === æœ¬åœ°æ„å»ºï¼ˆé‡è¦ï¼‰ ===

# 5. æœ¬åœ°æ„å»ºäº§ç‰©
npm run build

# === éƒ¨ç½²åˆ°æœåŠ¡å™¨ ===

# 6. ä¸Šä¼ æ„å»ºäº§ç‰©ï¼ˆä¸æ˜¯æºç ï¼‰
rsync -avz \
  --exclude 'node_modules' \
  --exclude '.next/cache' \
  .next/ package.json package-lock.json \
  shanghai-tencent:/var/www/example-frontend/

# 7. æœåŠ¡å™¨ä¸Šå®‰è£…ç”Ÿäº§ä¾èµ–å¹¶å¯åŠ¨
ssh shanghai-tencent
cd /var/www/example-frontend
npm install --production  # åªå®‰è£…ç”Ÿäº§ä¾èµ–
pm2 restart example-frontend
```

#### 3. åç«¯éƒ¨ç½²ï¼ˆGoï¼‰

**é‡è¦**ï¼š
- âœ… **æœ¬åœ°äº¤å‰ç¼–è¯‘**ï¼ˆMac â†’ Linuxï¼‰
- âœ… **ç¦ç”¨ cgo**ï¼ˆ`CGO_ENABLED=0`ï¼‰
- âœ… **ç”Ÿæˆé™æ€é“¾æ¥äºŒè¿›åˆ¶**
- âœ… **ä¸Šä¼ äºŒè¿›åˆ¶æ–‡ä»¶åˆ°æœåŠ¡å™¨**

```bash
# === æœ¬åœ°å¼€å‘ ===
cd backend/

# 1. ä¸‹è½½ä¾èµ–
go mod download

# 2. æœ¬åœ°è¿è¡Œï¼ˆå¯é€‰ï¼‰
go run cmd/server/main.go

# === äº¤å‰ç¼–è¯‘ï¼ˆæœ¬åœ° Mac â†’ Linux æœåŠ¡å™¨ï¼‰ ===

# 3. ç¼–è¯‘ Linux äºŒè¿›åˆ¶ï¼ˆé™æ€é“¾æ¥ï¼‰
CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build \
  -o bin/server \
  cmd/server/main.go

# 4. éªŒè¯äºŒè¿›åˆ¶æ–‡ä»¶
file bin/server
# è¾“å‡ºï¼šbin/server: ELF 64-bit LSB executable, x86-64, ...

# 5. ä¸Šä¼ äºŒè¿›åˆ¶å’Œé…ç½®
scp bin/server shanghai-tencent:/var/www/example-backend/
scp configs/config.yaml shanghai-tencent:/var/www/example-backend/

# 6. é‡å¯æœåŠ¡ï¼ˆåœ¨æœåŠ¡å™¨ä¸Šï¼‰
ssh shanghai-tencent "sudo systemctl restart example-backend"

# 7. æ£€æŸ¥æœåŠ¡çŠ¶æ€
ssh shanghai-tencent "sudo systemctl status example-backend"
```

# === æœåŠ¡å™¨é…ç½® ===

# 5. åˆ›å»º systemd æœåŠ¡
sudo tee /etc/systemd/system/example-backend.service << EOF
[Unit]
Description=Example Backend API
After=network.target

[Service]
Type=simple
User=ubuntu
WorkingDirectory=/var/www/example-backend
ExecStart=/var/www/example-backend/bin/server
Restart=always
RestartSec=5
Environment="PORT=8080"
EnvironmentFile=/var/www/example-backend/.env

[Install]
WantedBy=multi-user.target
EOF

# 6. å¯åŠ¨æœåŠ¡
sudo systemctl daemon-reload
sudo systemctl enable example-backend
sudo systemctl start example-backend
sudo systemctl status example-backend
```

#### 4. Nginx é…ç½®æ ‡å‡†æ¨¡æ¿

```nginx
# /etc/nginx/sites-available/example.com
server {
    listen 80;
    server_name example.com www.example.com;
    return 301 https://$server_name$request_uri;
}

server {
    listen 443 ssl http2;
    server_name example.com www.example.com;

    # SSL è¯ä¹¦
    ssl_certificate /etc/letsencrypt/live/example.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem;

    # å‰ç«¯é™æ€èµ„æº
    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    # åç«¯ API
    location /api {
        rewrite ^/api/?(.*) /$1 break;
        proxy_pass http://localhost:8080;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;

        # CORS (å¦‚éœ€è¦)
        add_header Access-Control-Allow-Origin https://example.com;
        add_header Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS";
        add_header Access-Control-Allow-Headers "Authorization, Content-Type";
        add_header Access-Control-Allow-Credentials true;
    }

    # é™æ€æ–‡ä»¶ç¼“å­˜
    location /_next/static {
        proxy_pass http://localhost:3000;
        proxy_cache_valid 200 60m;
        add_header Cache-Control "public, immutable";
    }

    # å¥åº·æ£€æŸ¥
    location /health {
        proxy_pass http://localhost:8080/health;
        access_log off;
    }
}
```

---

### æœ¬åœ°æ„å»º vs æœåŠ¡å™¨æ„å»ºå¯¹æ¯”

#### ä¸ºä»€ä¹ˆç¦æ­¢åœ¨æœåŠ¡å™¨ä¸Šæ„å»ºï¼Ÿ

| å¯¹æ¯”é¡¹ | æœ¬åœ°æ„å»º âœ… | æœåŠ¡å™¨æ„å»º âŒ |
|--------|------------|-------------|
| **CPU å ç”¨** | æœ¬åœ° Macï¼ˆé«˜æ€§èƒ½ï¼‰ | æœåŠ¡å™¨ CPUï¼ˆå½±å“çº¿ä¸ŠæœåŠ¡ï¼‰ |
| **ç£ç›˜å ç”¨** | åªä¸Šä¼ æ„å»ºäº§ç‰© | éœ€è¦å®‰è£…å¼€å‘å·¥å…· + node_modules |
| **ç½‘ç»œå¸¦å®½** | åªä¸Šä¼ å¿…è¦æ–‡ä»¶ | éœ€è¦ä¸‹è½½ä¾èµ–åŒ… |
| **æ„å»ºæ—¶é—´** | å¿«ï¼ˆæœ¬åœ°æ€§èƒ½å¥½ï¼‰ | æ…¢ï¼ˆæœåŠ¡å™¨é€šå¸¸ä¸å¦‚æœ¬åœ°ï¼‰ |
| **ç¯å¢ƒä¸€è‡´æ€§** | å¯æ§ï¼ˆæœ¬åœ°ç¯å¢ƒï¼‰ | ä¸å¯æ§ï¼ˆæœåŠ¡å™¨ç¯å¢ƒå˜åŒ–ï¼‰ |
| **å®‰å…¨æ€§** | æœåŠ¡å™¨æ— éœ€å¼€å‘å·¥å…· | éœ€è¦å®‰è£… Node.js/Go ç¼–è¯‘å™¨ |

#### å…·ä½“æ•°æ®å¯¹æ¯”

**Vite å‰ç«¯æ„å»º**ï¼š
```bash
# æœ¬åœ°æ„å»º
- ç£ç›˜å ç”¨ï¼šnode_modules ~300MBï¼ˆæœ¬åœ°ï¼‰
- æ„å»ºæ—¶é—´ï¼š~10ç§’ï¼ˆMac M1/M2ï¼‰
- ä¸Šä¼ å¤§å°ï¼šdist/ ~2MB
- æœåŠ¡å™¨å ç”¨ï¼š~2MBï¼ˆåªä¿ç•™æ„å»ºäº§ç‰©ï¼‰

# æœåŠ¡å™¨æ„å»ºï¼ˆé”™è¯¯æ–¹å¼ï¼‰
- ç£ç›˜å ç”¨ï¼šnode_modules ~300MBï¼ˆæœåŠ¡å™¨ï¼‰
- æ„å»ºæ—¶é—´ï¼š~30-60ç§’ï¼ˆæœåŠ¡å™¨ CPU è¾ƒå¼±ï¼‰
- ä¸Šä¼ å¤§å°ï¼šæºç  + node_modules
- æœåŠ¡å™¨å ç”¨ï¼š~600MB+
```

**Go åç«¯æ„å»º**ï¼š
```bash
# æœ¬åœ°äº¤å‰ç¼–è¯‘
- ç¼–è¯‘å‘½ä»¤ï¼šCGO_ENABLED=0 GOOS=linux go build
- ç¼–è¯‘æ—¶é—´ï¼š~5ç§’
- ä¸Šä¼ å¤§å°ï¼šbin/server ~15-20MBï¼ˆå•ä¸ªäºŒè¿›åˆ¶ï¼‰
- æœåŠ¡å™¨å ç”¨ï¼š~20MBï¼ˆåªä¿ç•™äºŒè¿›åˆ¶ï¼‰

# æœåŠ¡å™¨ç¼–è¯‘ï¼ˆé”™è¯¯æ–¹å¼ï¼‰
- éœ€è¦ï¼šå®‰è£… Go ç¼–è¯‘å™¨
- ç¼–è¯‘æ—¶é—´ï¼š~10-20ç§’
- æœåŠ¡å™¨å ç”¨ï¼šéœ€è¦ Go å·¥å…·é“¾ + æºç 
```

#### æ€»ç»“

**æœ¬åœ°æ„å»ºä¼˜åŠ¿**ï¼š
- âœ… å¿«é€Ÿï¼ˆæœ¬åœ°æ€§èƒ½å¥½ï¼‰
- âœ… èŠ‚çœæœåŠ¡å™¨èµ„æºï¼ˆç£ç›˜ã€CPUã€å¸¦å®½ï¼‰
- âœ… å®‰å…¨ï¼ˆæœåŠ¡å™¨æ— å¼€å‘å·¥å…·ï¼‰
- âœ… å¯æ§ï¼ˆæœ¬åœ°ç¯å¢ƒä¸€è‡´ï¼‰

**ç¦æ­¢æœåŠ¡å™¨æ„å»ºåŸå› **ï¼š
- âŒ å ç”¨æœåŠ¡å™¨èµ„æºï¼ˆå½±å“å…¶ä»–æœåŠ¡ï¼‰
- âŒ æµªè´¹ç£ç›˜ç©ºé—´ï¼ˆnode_modules å¾ˆå¤§ï¼‰
- âŒ å¢åŠ æ”»å‡»é¢ï¼ˆå¼€å‘å·¥å…·å¯èƒ½æœ‰æ¼æ´ï¼‰
- âŒ æ„å»ºæ…¢ï¼ˆå½±å“éƒ¨ç½²é€Ÿåº¦ï¼‰

**æ‰€æœ‰ KeeNChase V3.0 ç³»ç»Ÿå¿…é¡»éµå®ˆæ­¤è§„åˆ™ã€‚**

---

### ç¯å¢ƒå˜é‡ç®¡ç†ï¼ˆå¼ºåˆ¶ï¼‰

#### Vite å‰ç«¯ç¯å¢ƒå˜é‡ï¼ˆ.env.productionï¼‰
```bash
# âœ… å¿…é¡»ä»¥ VITE_ å¼€å¤´ï¼ˆæš´éœ²ç»™æµè§ˆå™¨ï¼‰
VITE_API_URL=https://api.example.com
VITE_APP_URL=https://example.com
VITE_WECHAT_APP_ID=wxe3453a6c5c8ec701
```

#### Next.js å‰ç«¯ç¯å¢ƒå˜é‡ï¼ˆ.env.localï¼‰
```bash
# âœ… å¿…é¡»ä»¥ NEXT_PUBLIC_ å¼€å¤´ï¼ˆæš´éœ²ç»™æµè§ˆå™¨ï¼‰
NEXT_PUBLIC_API_URL=https://api.example.com
NEXT_PUBLIC_APP_URL=https://example.com
NEXT_PUBLIC_WECHAT_APP_ID=wxe3453a6c5c8ec701
```

#### åç«¯ç¯å¢ƒå˜é‡ï¼ˆ.envï¼‰
```bash
# âœ… æœåŠ¡å™¨é…ç½®
PORT=8080
GIN_MODE=release

# âœ… æ•°æ®åº“è¿æ¥
DATABASE_URL=postgresql://user:pass@47.110.82.96:5432/db_name?sslmode=require

# âœ… JWT é…ç½®
JWT_SECRET=your-secret-key-min-32-chars
JWT_EXPIRATION=168h  # 7å¤©

# âœ… å¾®ä¿¡é…ç½®
WECHAT_APP_ID=xxx
WECHAT_APP_SECRET=xxx
WECHAT_MP_APPID=xxx
WECHAT_MP_SECRET=xxx

# âœ… CORS é…ç½®
ALLOWED_ORIGINS=https://example.com,https://www.example.com
```

---

## ğŸ” å®‰å…¨è§„èŒƒï¼ˆå¼ºåˆ¶ï¼‰

### 1. è®¤è¯ä¸æˆæƒ

#### JWT Token è§„èŒƒ
```go
// âœ… Token ç»“æ„
type Claims struct {
    UserID string `json:"userId"`
    jwt.RegisteredClaims
}

// âœ… æ ‡å‡†é…ç½®
- ç®—æ³•: HS256
- æœ‰æ•ˆæœŸ: 7å¤© (168å°æ—¶)
- ç­¾åå¯†é’¥: æœ€å°‘32å­—ç¬¦
- å­˜å‚¨: PostgreSQL sessions è¡¨
```

#### è®¤è¯ä¸­é—´ä»¶ï¼ˆGoï¼‰
```go
// âœ… æ ‡å‡† JWT éªŒè¯æµç¨‹
func AuthMiddleware() gin.HandlerFunc {
    return func(c *gin.Context) {
        // 1. æå– Token
        token := c.GetHeader("Authorization")
        if !strings.HasPrefix(token, "Bearer ") {
            c.JSON(401, gin.H{"error": "Missing token"})
            c.Abort()
            return
        }

        // 2. éªŒè¯ Token
        tokenString := strings.TrimPrefix(token, "Bearer ")
        claims, err := ValidateToken(tokenString)
        if err != nil {
            c.JSON(401, gin.H{"error": "Invalid token"})
            c.Abort()
            return
        }

        // 3. æ£€æŸ¥ä¼šè¯
        session, err := GetSession(tokenString)
        if err != nil || session.ExpiresAt.Before(time.Now()) {
            c.JSON(401, gin.H{"error": "Session expired"})
            c.Abort()
            return
        }

        // 4. æ³¨å…¥ç”¨æˆ·ä¿¡æ¯
        c.Set("userId", claims.UserID)
        c.Next()
    }
}
```

### 2. å¯†ç å®‰å…¨

```go
// âœ… å¯†ç å“ˆå¸Œï¼ˆå¼ºåˆ¶ bcryptï¼‰
import "golang.org/x/crypto/bcrypt"

// å“ˆå¸Œå¯†ç 
func HashPassword(password string) (string, error) {
    bytes, err := bcrypt.GenerateFromPassword([]byte(password), bcrypt.DefaultCost)
    return string(bytes), err
}

// éªŒè¯å¯†ç 
func CheckPassword(password, hash string) bool {
    err := bcrypt.CompareHashAndPassword([]byte(hash), []byte(password))
    return err == nil
}
```

### 3. æ•°æ®åº“å®‰å…¨

#### è¿æ¥å­—ç¬¦ä¸²è§„èŒƒ
```bash
# âœ… ç”Ÿäº§ç¯å¢ƒï¼ˆå¼ºåˆ¶ SSLï¼‰
DATABASE_URL="postgresql://user:pass@host:5432/db?sslmode=require"

# âŒ ç¦æ­¢ç”Ÿäº§ç¯å¢ƒä½¿ç”¨
DATABASE_URL="postgresql://user:pass@host:5432/db?sslmode=disable"
```

#### SQL æ³¨å…¥é˜²æŠ¤
```go
// âœ… ä½¿ç”¨ GORM å‚æ•°åŒ–æŸ¥è¯¢
db.Where("user_id = ?", userID).First(&user)

// âŒ ç¦æ­¢å­—ç¬¦ä¸²æ‹¼æ¥
db.Where("user_id = '" + userID + "'").First(&user)
```

### 4. CORS é…ç½®ï¼ˆå¸¦ç™½åå•éªŒè¯ï¼‰

**âš ï¸ å®‰å…¨è¦æ±‚**: è´¦å·ä¸­å¿ƒå¿…é¡»å®ç° CORS ç™½åå•ï¼Œé˜²æ­¢é’“é±¼ç½‘ç«™éæ³•è°ƒç”¨ã€‚

```go
// âœ… CORS ä¸­é—´ä»¶ï¼ˆå¸¦ç™½åå•éªŒè¯ï¼‰
func CORSMiddleware(cfg *config.Config) gin.HandlerFunc {
    // è§£æç™½åå•
    allowedOrigins := strings.Split(cfg.AllowedOrigins, ",")
    originMap := make(map[string]bool)
    for _, origin := range allowedOrigins {
        originMap[strings.TrimSpace(origin)] = true
    }

    return func(c *gin.Context) {
        origin := c.Request.Header.Get("Origin")

        // éªŒè¯ Origin æ˜¯å¦åœ¨ç™½åå•ä¸­
        if origin != "" {
            if !originMap[origin] {
                c.JSON(403, gin.H{
                    "success": false,
                    "error":   "åŸŸåæœªåœ¨ç™½åå•ä¸­",
                })
                c.Abort()
                return
            }
            // è®¾ç½®å…·ä½“çš„ Originï¼ˆä¸èƒ½æ˜¯ *ï¼Œå› ä¸ºè¦æ”¯æŒ credentialsï¼‰
            c.Writer.Header().Set("Access-Control-Allow-Origin", origin)
        }

        c.Writer.Header().Set("Access-Control-Allow-Credentials", "true")
        c.Writer.Header().Set("Access-Control-Allow-Headers", "Content-Type, Content-Length, Accept-Encoding, X-CSRF-Token, Authorization, accept, origin, Cache-Control, X-Requested-With")
        c.Writer.Header().Set("Access-Control-Allow-Methods", "POST, OPTIONS, GET, PUT, DELETE")

        if c.Request.Method == "OPTIONS" {
            c.AbortWithStatus(204)
            return
        }

        c.Next()
    }
}
```

**ç¯å¢ƒå˜é‡é…ç½®**:
```bash
# .env
# CORS ç™½åå•ï¼ˆé€—å·åˆ†éš”ï¼Œåªå…è®¸è¿™äº›åŸŸåè°ƒç”¨è´¦å·ä¸­å¿ƒ APIï¼‰
ALLOWED_ORIGINS=https://os.crazyaigc.com,https://pr.crazyaigc.com,https://pixel.crazyaigc.com,https://quote.crazyaigc.com,https://3xvs5r4nm4.coze.site,https://study.crazyaigc.com,https://crm.crazyaigc.com

# å›è°ƒåŸŸåç™½åå•ï¼ˆé€—å·åˆ†éš”ï¼Œåªå…è®¸è¿™äº›åŸŸåæ¥æ”¶ç™»å½•å›è°ƒï¼‰
ALLOWED_CALLBACK_DOMAINS=pr.crazyaigc.com,www.crazyaigc.com,os.crazyaigc.com,pixel.crazyaigc.com,quote.crazyaigc.com,localhost
```

**å®‰å…¨æ•ˆæœ**:
- âœ… é˜»æ­¢é’“é±¼ç½‘ç«™ä»æµè§ˆå™¨ç«¯è°ƒç”¨è´¦å·ä¸­å¿ƒ API
- âœ… ä¿æŠ¤ç”¨æˆ· token ä¸è¢«éæ³•ç½‘ç«™çªƒå–
- âš ï¸ æ³¨æ„ï¼šä¸èƒ½é˜²æ­¢æœåŠ¡ç«¯ç›´æ¥è°ƒç”¨ï¼ˆéœ€è¦é¢å¤–çš„ API å¯†é’¥éªŒè¯ï¼‰
```

---

## ğŸ“Š ç›‘æ§ä¸æ—¥å¿—è§„èŒƒ

### ç»“æ„åŒ–æ—¥å¿—ï¼ˆæ ‡å‡†ï¼‰

```go
import "go.uber.org/zap"

// âœ… ç»“æ„åŒ–æ—¥å¿—
logger, _ := zap.NewProduction()
logger.Info("User login",
    zap.String("userId", userID),
    zap.String("ip", clientIP),
    zap.Duration("duration", duration),
)

// âœ… é”™è¯¯æ—¥å¿—
logger.Error("Database connection failed",
    zap.Error(err),
    zap.String("host", dbHost),
)
```

### å¥åº·æ£€æŸ¥ç«¯ç‚¹ï¼ˆå¼ºåˆ¶ï¼‰

```go
// âœ… æ ‡å‡† /health ç«¯ç‚¹
func HealthCheck(db *gorm.DB) gin.HandlerFunc {
    return func(c *gin.Context) {
        // æ£€æŸ¥æ•°æ®åº“è¿æ¥
        sqlDB, err := db.DB()
        if err != nil {
            c.JSON(503, gin.H{"status": "unhealthy"})
            return
        }

        if err := sqlDB.Ping(); err != nil {
            c.JSON(503, gin.H{"status": "unhealthy"})
            return
        }

        c.JSON(200, gin.H{
            "status": "healthy",
            "service": "example-backend",
        })
    }
}
```

---

## ğŸ§ª æµ‹è¯•è§„èŒƒ

### å•å…ƒæµ‹è¯•ï¼ˆæ¨èï¼‰

```go
// âœ… è¡¨æ ¼é©±åŠ¨æµ‹è¯•
func TestValidateEmail(t *testing.T) {
    tests := []struct {
        name  string
        email string
        want  bool
    }{
        {"valid email", "test@example.com", true},
        {"invalid email", "invalid", false},
        {"empty email", "", false},
    }

    for _, tt := range tests {
        t.Run(tt.name, func(t *testing.T) {
            got := ValidateEmail(tt.email)
            if got != tt.want {
                t.Errorf("ValidateEmail() = %v, want %v", got, tt.want)
            }
        })
    }
}
```

### API æµ‹è¯•ï¼ˆæ¨èï¼‰

```go
func TestLoginAPI(t *testing.T) {
    router := SetupRouter()

    w := httptest.NewRecorder()
    req := httptest.NewRequest("POST", "/api/auth/login", strings.NewReader(`{
        "email": "test@example.com",
        "password": "password123"
    }`))
    req.Header.Set("Content-Type", "application/json")

    router.ServeHTTP(w, req)

    assert.Equal(t, 200, w.Code)
    assert.Contains(t, w.Body.String(), "token")
}
```

---

## ğŸ“š æ–‡æ¡£è§„èŒƒ

### API æ–‡æ¡£ï¼ˆå¼ºåˆ¶ï¼‰

**æ¯ä¸ªåç«¯é¡¹ç›®å¿…é¡»æä¾›**ï¼š
1. README.md - é¡¹ç›®è¯´æ˜
2. API.md - API æ–‡æ¡£ï¼ˆå¯é€‰ï¼Œä½¿ç”¨ Swaggerï¼‰
3. DEPLOYMENT.md - éƒ¨ç½²æ–‡æ¡£

### API æ–‡æ¡£æ¨¡æ¿

```markdown
# API æ–‡æ¡£

## è®¤è¯

æ‰€æœ‰ API è¯·æ±‚éœ€è¦åœ¨ Header ä¸­æºå¸¦ Token:

```
Authorization: Bearer <token>
```

## ç«¯ç‚¹åˆ—è¡¨

### ç”¨æˆ·ç›¸å…³

#### åˆ›å»ºç”¨æˆ·
- **URL**: POST /api/users
- **è®¤è¯**: éœ€è¦
- **æƒé™**: admin

**è¯·æ±‚ä½“**:
```json
{
  "userName": "å¼ ä¸‰",
  "email": "test@example.com"
}
```

**å“åº”**:
```json
{
  "success": true,
  "data": {
    "userId": "uuid-xxx",
    "userName": "å¼ ä¸‰",
    "email": "test@example.com"
  }
}
```
```

---

## ğŸ”§ å¼€å‘å·¥ä½œæµ

### Git æäº¤è§„èŒƒï¼ˆå¼ºåˆ¶ï¼‰

```
<type>(<scope>): <subject>

type:
  feat     - æ–°åŠŸèƒ½
  fix      - Bug ä¿®å¤
  docs     - æ–‡æ¡£æ›´æ–°
  style    - ä»£ç æ ¼å¼ï¼ˆä¸å½±å“åŠŸèƒ½ï¼‰
  refactor - é‡æ„
  test     - æµ‹è¯•
  chore    - æ„å»º/å·¥å…·

ç¤ºä¾‹:
feat(auth): æ·»åŠ å¾®ä¿¡ç™»å½•åŠŸèƒ½
fix(database): ä¿®å¤ç”¨æˆ·æŸ¥è¯¢ SQL é”™è¯¯
docs(api): æ›´æ–°è®¤è¯æ–‡æ¡£
```

### ä»£ç å®¡æŸ¥ï¼ˆå¼ºåˆ¶ï¼‰

**å¿…é¡»æ»¡è¶³**ï¼š
- âœ… éµå¾ªä»£ç è§„èŒƒ
- âœ… é€šè¿‡ç±»å‹æ£€æŸ¥ (`npx tsc --noEmit`)
- âœ… é€šè¿‡ç¼–è¯‘ (`go build`)
- âœ… æœ‰é€‚å½“çš„æ³¨é‡Š
- âœ… æœ‰å¿…è¦çš„æµ‹è¯•

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### æœåŠ¡å™¨ä¿¡æ¯

**âš ï¸ é‡è¦ï¼šåŒºåˆ†æ“ä½œç³»ç»Ÿç”¨æˆ·å’Œæ•°æ®åº“ç”¨æˆ·**

**æ­å·æ•°æ®åº“æœåŠ¡å™¨**:
- åˆ«å: hangzhou-ali
- IP: 47.110.82.96
- SSHç™»å½•ç”¨æˆ·ï¼ˆæ“ä½œç³»ç»Ÿï¼‰: `root`
- SSHè¿æ¥å‘½ä»¤: `ssh hangzhou-ali`
- æ•°æ®åº“: PostgreSQL 15 (Dockerå®¹å™¨)
- æ•°æ®åº“ç”¨æˆ·ï¼ˆPostgreSQLï¼‰: `nexus`
- æ•°æ®åº“å¯†ç : `nexus123`

**ä¸Šæµ·åº”ç”¨æœåŠ¡å™¨**:
- åˆ«å: shanghai-tencent
- IP: 101.35.120.199
- SSHç™»å½•ç”¨æˆ·ï¼ˆæ“ä½œç³»ç»Ÿï¼‰: `ubuntu`
- SSHè¿æ¥å‘½ä»¤: `ssh shanghai-tencent`
- éƒ¨ç½²åº”ç”¨: os.crazyaigc.com, pr.crazyaigc.com, pixel.crazyaigc.com, quote.crazyaigc.com

**ç”¨æˆ·æ¦‚å¿µè¯´æ˜**ï¼š
```
æ“ä½œç³»ç»Ÿç”¨æˆ·ï¼ˆSSHç™»å½•ï¼‰:
â”œâ”€ ä¸Šæµ·: ubuntuï¼ˆæ™®é€šç”¨æˆ·ï¼‰
â””â”€ æ­å·: rootï¼ˆç®¡ç†å‘˜ç”¨æˆ·ï¼‰

æ•°æ®åº“ç”¨æˆ·ï¼ˆPostgreSQLè¿æ¥ï¼‰:
â””â”€ nexusï¼ˆè¶…çº§ç”¨æˆ·ï¼Œæ‰€æœ‰ä¸šåŠ¡ç³»ç»Ÿç»Ÿä¸€ä½¿ç”¨ï¼‰
```

### å¸¸ç”¨å‘½ä»¤

```bash
# === æ­å·æ•°æ®åº“æœåŠ¡å™¨ ===
# SSH è¿æ¥ï¼ˆæ“ä½œç³»ç»Ÿç”¨æˆ·ï¼šrootï¼‰
ssh hangzhou-ali

# æŸ¥çœ‹æ•°æ®åº“å®¹å™¨
docker ps | grep postgres

# è¿æ¥æ•°æ®åº“ï¼ˆæ•°æ®åº“ç”¨æˆ·ï¼šnexusï¼‰
docker exec -it keenchase-postgres psql -U nexus -d auth_center_db

# === ä¸Šæµ·åº”ç”¨æœåŠ¡å™¨ ===
# SSH è¿æ¥ï¼ˆæ“ä½œç³»ç»Ÿç”¨æˆ·ï¼šubuntuï¼‰
ssh shanghai-tencent

# æŸ¥çœ‹è¿è¡Œä¸­çš„æœåŠ¡
sudo systemctl status auth-center-backend
sudo systemctl status pr-business-backend
sudo systemctl status superpixel-backend
sudo systemctl status quote-backend

# æŸ¥çœ‹SSHéš§é“çŠ¶æ€
sudo systemctl status pg-tunnel

# Nginx ç®¡ç†
sudo nginx -t                    # æµ‹è¯•é…ç½®
sudo systemctl reload nginx      # é‡è½½é…ç½®
sudo systemctl status nginx      # æŸ¥çœ‹çŠ¶æ€

# æŸ¥çœ‹ç³»ç»Ÿèµ„æº
htop                              # ç³»ç»Ÿèµ„æºç›‘æ§
df -h                             # ç£ç›˜ä½¿ç”¨
free -h                           # å†…å­˜ä½¿ç”¨
```

---

## ğŸ“‹ ç‰ˆæœ¬å†å²

### V3.0 (2026-02-01) - å½“å‰ç‰ˆæœ¬

**é‡å¤§å˜æ›´**ï¼š
- âœ… å¼•å…¥ Go åç«¯æ ‡å‡†ï¼ˆå‰åç«¯åˆ†ç¦»ï¼‰
- âœ… å‰ç«¯æŠ€æœ¯æ ˆæ ‡å‡†åŒ–ï¼šVite + React (æ¨è) / Next.js (SSR åœºæ™¯)
- âœ… å¼ºåˆ¶æ•°æ®åº“å‘½åè§„èŒƒï¼ˆsnake_caseï¼‰
- âœ… å¼ºåˆ¶ UUID ä¸»é”®
- âœ… ç»Ÿä¸€ä»£ç è§„èŒƒï¼ˆGo + TypeScriptï¼‰
- âœ… æ ‡å‡†åŒ–éƒ¨ç½²æµç¨‹

**ç³»ç»Ÿè¿ç§»çŠ¶æ€**ï¼š
- è´¦å·ä¸­å¿ƒ: âœ… **V1.0.0 æ­£å¼ç‰ˆä¸Šçº¿** (2026-02-01)
- PRä¸šåŠ¡ç³»ç»Ÿ: âœ… å·²å®Œæˆè¿ç§» (Vite + React + Go)
- AIç”Ÿå›¾ç³»ç»Ÿ: âœ… å·²å®Œæˆè¿ç§» (Vite + React + Go)
- æŠ¥ä»·ç³»ç»Ÿ: âœ… å·²å®Œæˆéƒ¨ç½² (Vite + React + Go)
- çŸ¥è¯†åº“ç³»ç»Ÿ: âœ… å·²éƒ¨ç½² (Next.jsï¼Œæš‚æ— åç«¯)
- å®¢æˆ·ç®¡ç†ç³»ç»Ÿ: âœ… å·²éƒ¨ç½² (Next.jsï¼Œæš‚æ— åç«¯)

**Auth-Center V1.0.0 æ­£å¼ç‰ˆ** (2026-02-01)ï¼š
- ğŸ‰ è´¦å·ä¸­å¿ƒé¦–ä¸ªæ­£å¼ç‰ˆå‘å¸ƒ
- å¾®ä¿¡ç™»å½•ï¼ˆå¼€æ”¾å¹³å° + å…¬ä¼—å·åŒæ¨¡å¼ï¼‰
- å¯†ç ç™»å½•ï¼ˆæœ¬åœ°æ•°æ®åº“éªŒè¯ï¼‰
- ä¼šè¯ç®¡ç†åŠŸèƒ½ï¼ˆç”¨æˆ·å¯æŸ¥çœ‹æ‰€æœ‰ç™»å½•è®¾å¤‡ï¼‰
- ç®¡ç†å‘˜åå°ï¼ˆç”¨æˆ·ç®¡ç†ã€ä¼šè¯æŸ¥çœ‹ã€å¯†ç è®¾ç½®ï¼‰
- JWT Token è®¤è¯ï¼ˆ7å¤©æœ‰æ•ˆæœŸï¼‰
- éƒ¨ç½²åœ°å€ï¼šhttps://os.crazyaigc.com
- Git æ ‡ç­¾ï¼šv1.0.0

### V2.0 (2026-01-28)

**ç‰¹æ€§**ï¼š
- ç»Ÿä¸€è´¦å·ä¸­å¿ƒ
- å¾®ä¿¡ç™»å½•åŒæ¨¡å¼
- Monorepo ç»“æ„

### V1.0 (2026-01-01)

**ç‰¹æ€§**ï¼š
- åˆå§‹ç‰ˆæœ¬
- Next.js å•ä½“åº”ç”¨

---

**ç»´æŠ¤è€…**: KeeNChase Dev Team
**æœ€åæ›´æ–°**: 2026-02-01 (auth-center V1.0.0 æ­£å¼ç‰ˆä¸Šçº¿)
**ä¸‹æ¬¡å®¡æ ¸**: 2026-03-01

---

## ğŸ”— è´¦å·ä¸­å¿ƒé›†æˆæŒ‡å—

**é¢å‘**: ä¸šåŠ¡ç³»ç»Ÿé›†æˆè´¦å·ä¸­å¿ƒè®¤è¯
**è´¦å·ä¸­å¿ƒåœ°å€**: https://os.crazyaigc.com
**æ¶æ„ç‰ˆæœ¬**: V3.0 - å‰åç«¯åˆ†ç¦» + Go åç«¯
**å½“å‰ç‰ˆæœ¬**: v1.0.0 (2026-02-01 æ­£å¼å‘å¸ƒ)
**æœ€åæ›´æ–°**: 2026-02-01

---

### ğŸ“ éƒ¨ç½²æ¶æ„ï¼ˆé‡è¦ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ä¸šåŠ¡ç³»ç»Ÿéƒ¨ç½²æ¶æ„                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ“ ä¸Šæµ·æœåŠ¡å™¨ (101.35.120.199)
â”œâ”€ ç”¨é€”: åº”ç”¨æœåŠ¡å™¨
â”œâ”€ éƒ¨ç½²å†…å®¹:
â”‚   â”œâ”€ å‰ç«¯ (Vite/Next.js) - Nginx/PM2
â”‚   â””â”€ åç«¯ (Go API) - Systemd
â””â”€ ä¸šåŠ¡ç³»ç»Ÿ:
    â”œâ”€ os.crazyaigc.com (è´¦å·ä¸­å¿ƒ)
    â”œâ”€ pr.crazyaigc.com (PRä¸šåŠ¡)
    â”œâ”€ pixel.crazyaigc.com (AIç”Ÿå›¾)
    â”œâ”€ quote.crazyaigc.com (æŠ¥ä»·ç³»ç»Ÿ)
    â”œâ”€ study.crazyaigc.com (çŸ¥è¯†åº“)
    â””â”€ crm.crazyaigc.com (å®¢æˆ·ç®¡ç†)

ğŸ“ æ­å·æœåŠ¡å™¨ (47.110.82.96)
â”œâ”€ ç”¨é€”: ç»Ÿä¸€æ•°æ®åº“æœåŠ¡å™¨
â”œâ”€ éƒ¨ç½²å†…å®¹:
â”‚   â””â”€ PostgreSQL 15 (ç«¯å£5432)
â””â”€ æ•°æ®åº“:
    â”œâ”€ auth_center_db (è´¦å·ä¸­å¿ƒ)
    â”œâ”€ pr_business_db (PRä¸šåŠ¡)
    â”œâ”€ pixel_business_db (AIç”Ÿå›¾)
    â”œâ”€ quote_business_db (æŠ¥ä»·ç³»ç»Ÿ)
    â”œâ”€ study_business_db (çŸ¥è¯†åº“)
    â””â”€ crm_business_db (å®¢æˆ·ç®¡ç†)

ğŸ”— è¿æ¥æ–¹å¼:
â”œâ”€ å‰ç«¯ â†’ åç«¯: localhost (åŒä¸€æœåŠ¡å™¨)
â””â”€ åç«¯ â†’ æ•°æ®åº“: è·¨æœåŠ¡å™¨ (ä¸Šæµ· â†’ æ­å·)
```

**å…³é”®ç‚¹**ï¼š
- âœ… **æ‰€æœ‰ä¸šåŠ¡ç³»ç»Ÿçš„å‰åç«¯éƒ½éƒ¨ç½²åœ¨ä¸Šæµ·æœåŠ¡å™¨**
- âœ… **æ‰€æœ‰æ•°æ®åº“éƒ½éƒ¨ç½²åœ¨æ­å·æœåŠ¡å™¨**
- âœ… **åç«¯è¿æ¥æ•°æ®åº“éœ€è¦è·¨æœåŠ¡å™¨è®¿é—®**

---

### å¿«é€Ÿå¼€å§‹

**5åˆ†é’Ÿå®Œæˆå¯¹æ¥**ï¼š

#### å‰ç«¯éƒ¨åˆ†ï¼ˆTypeScript/Reactï¼‰

```typescript
// 1. å¼•å¯¼ç”¨æˆ·è·³è½¬åˆ°ä¸šåŠ¡ç³»ç»Ÿçš„åç«¯æ¥å£
window.location.href = 'https://pr.crazyaigc.com/api/auth/wechat/login'

// ç”¨æˆ·ä¼šçŸ­æš‚è·³è½¬åˆ° os.crazyaigc.comï¼ˆå¾®ä¿¡ç™»å½•çš„æ ‡å‡†æµç¨‹ï¼‰
// å‡ ç§’åè‡ªåŠ¨å›åˆ° pr.crazyaigc.com
```

#### åç«¯éƒ¨åˆ†ï¼ˆGo ç¤ºä¾‹ï¼‰

```go
// 2. ä¸šåŠ¡ç³»ç»Ÿåç«¯ï¼šå‘èµ·å¾®ä¿¡ç™»å½•ï¼ˆä»£ç†æ¥å£ï¼‰
// GET /api/auth/wechat/login
func WechatLogin(c *gin.Context) {
    callbackUrl := "https://pr.crazyaigc.com/api/auth/callback"
    authCenterURL := fmt.Sprintf(
        "https://os.crazyaigc.com/api/auth/wechat/login?callbackUrl=%s",
        url.QueryEscape(callbackUrl),
    )
    // é‡å®šå‘åˆ°è´¦å·ä¸­å¿ƒï¼ˆç”¨æˆ·ä¼šçŸ­æš‚çœ‹åˆ° os.crazyaigc.comï¼‰
    c.Redirect(302, authCenterURL)
}

// 3. ä¸šåŠ¡ç³»ç»Ÿåç«¯ï¼šæ¥æ”¶å¾®ä¿¡æˆæƒå›è°ƒ
// GET /api/auth/callback?code=xxx&type=open
func AuthCallback(c *gin.Context) {
    code := c.Query("code")        // å¾®ä¿¡æˆæƒç 
    loginType := c.Query("type")   // "open" (å¼€æ”¾å¹³å°) æˆ– "mp" (å…¬ä¼—å·)

    if code == "" {
        c.JSON(400, gin.H{"error": "ç¼ºå°‘codeå‚æ•°"})
        return
    }

    // è°ƒç”¨è´¦å·ä¸­å¿ƒçš„å¾®ä¿¡ç™»å½•APIï¼Œç”¨codeæ¢å–token
    // POST https://os.crazyaigc.com/api/auth/wechat/login
    // Body: {"code": "xxx", "type": "open"}
    loginResp, _ := http.Post(
        "https://os.crazyaigc.com/api/auth/wechat/login",
        "application/json",
        strings.NewReader(fmt.Sprintf(`{"code":"%s","type":"%s"}`, code, loginType)),
    )

    var result struct {
        Success bool `json:"success"`
        Data struct {
            UserID    string `json:"userId"`
            Token     string `json:"token"`
            UnionID   string `json:"unionId"`
            PhoneNumber string `json:"phoneNumber"`
        } `json:"data"`
    }
    json.NewDecoder(loginResp.Body).Decode(&result)

    if !result.Success {
        c.JSON(401, gin.H{"error": "ç™»å½•å¤±è´¥"})
        return
    }

    // åˆ›å»º/è·å–æœ¬åœ°ç”¨æˆ·
    user := findOrCreateUser(result.Data.UserID)

    // è®¾ç½® sessionï¼ˆå­˜å‚¨ userId å’Œ tokenï¼‰
    setSession(c, user, result.Data.Token)

    // è·³è½¬åˆ°ä¸šåŠ¡ç³»ç»Ÿé¦–é¡µ
    c.Redirect(302, "/dashboard")
}
```

#### å®Œæ•´æµç¨‹

```
1. ç”¨æˆ·åœ¨ pr.crazyaigc.com ç‚¹å‡»"å¾®ä¿¡ç™»å½•"
   â†’ å‰ç«¯è·³è½¬åˆ° /api/auth/wechat/login

2. ä¸šåŠ¡ç³»ç»Ÿåç«¯é‡å®šå‘åˆ°è´¦å·ä¸­å¿ƒ
   â†’ ç”¨æˆ·ä¼šçŸ­æš‚çœ‹åˆ° os.crazyaigc.comï¼ˆæ­£å¸¸ç°è±¡ï¼‰

3. è´¦å·ä¸­å¿ƒé‡å®šå‘åˆ°å¾®ä¿¡æˆæƒé¡µé¢
   â†’ ç”¨æˆ·çœ‹åˆ° open.weixin.qq.comï¼ˆå¾®ä¿¡å®˜æ–¹é¡µé¢ï¼‰

4. ç”¨æˆ·æ‰«ç /æˆæƒï¼Œå¾®ä¿¡å›è°ƒåˆ°è´¦å·ä¸­å¿ƒ
   â†’ è´¦å·ä¸­å¿ƒå¤„ç†æˆæƒï¼Œè·å–ç”¨æˆ·ä¿¡æ¯

5. è´¦å·ä¸­å¿ƒå›è°ƒåˆ° pr.crazyaigc.com/api/auth/callback
   â†’ å›è°ƒå‚æ•°: code + type

6. ä¸šåŠ¡ç³»ç»Ÿåç«¯æ¥æ”¶ codeï¼Œè°ƒç”¨è´¦å·ä¸­å¿ƒ API
   â†’ éªŒè¯ code
   â†’ è·å– userId + token
   â†’ åˆ›å»ºæœ¬åœ°ç”¨æˆ·
   â†’ è®¾ç½® session
   â†’ è·³è½¬åˆ° /dashboard

7. ç”¨æˆ·å›åˆ° pr.crazyaigc.comï¼Œç™»å½•å®Œæˆ âœ…
```

### é‡è¦è¯´æ˜

**è´¦å·ä¸­å¿ƒå‰ç«¯çš„ä½¿ç”¨èŒƒå›´**ï¼š
- âœ… ç®¡ç†å‘˜ç™»å½•å’Œç®¡ç†ç”¨æˆ·
- âœ… è®¾ç½®ç”¨æˆ·æ‰‹æœºå·å’Œå¯†ç 
- âŒ **æ™®é€šç”¨æˆ·ä¸éœ€è¦è®¿é—®**
- âŒ **ä¸šåŠ¡ç³»ç»Ÿå‰ç«¯ä¸éœ€è¦é›†æˆ**

**ä¸šåŠ¡ç³»ç»Ÿé›†æˆæ–¹å¼**ï¼š
- âœ… åç«¯è°ƒç”¨è´¦å·ä¸­å¿ƒçš„ **åç«¯ API**
- âœ… ç”¨æˆ·ä¸»è¦æ—¶é—´åœ¨ä¸šåŠ¡ç³»ç»Ÿçš„ç½‘ç«™å®Œæˆæ“ä½œ
- âœ… ç”¨æˆ·æœ€ç»ˆåœ¨ä¸šåŠ¡ç³»ç»Ÿçš„åŸŸååœç•™

**âš ï¸ é‡è¦ï¼šå¾®ä¿¡ç™»å½•çš„åŸŸåè·³è½¬è¯´æ˜**

å¾®ä¿¡ç™»å½•è¿‡ç¨‹ä¸­ï¼Œç”¨æˆ·**ä¼šçŸ­æš‚çœ‹åˆ°**å…¶ä»–åŸŸåï¼Œè¿™æ˜¯**æ­£å¸¸ä¸”æ— æ³•é¿å…çš„**ï¼š

```
æ ‡å‡†å¾®ä¿¡ç™»å½•æµç¨‹ï¼ˆæ‰€æœ‰ç³»ç»Ÿéƒ½ä¸€æ ·ï¼‰ï¼š
ç”¨æˆ·åœ¨ pr.crazyaigc.com
  â†’ ç‚¹å‡»ç™»å½•
  â†’ os.crazyaigc.comï¼ˆçŸ­æš‚æ˜¾ç¤ºï¼Œå‡ ç§’é’Ÿï¼‰
  â†’ open.weixin.qq.comï¼ˆå¾®ä¿¡å®˜æ–¹æˆæƒé¡µé¢ï¼Œç”¨æˆ·æ“ä½œï¼‰
  â†’ os.crazyaigc.comï¼ˆå¤„ç†å›è°ƒï¼ŒæçŸ­æš‚ï¼‰
  â†’ pr.crazyaigc.com/api/auth/callback
  â†’ pr.crazyaigc.com/dashboardï¼ˆç™»å½•å®Œæˆï¼Œç”¨æˆ·åœç•™ï¼‰âœ…
```

**ä¸ºä»€ä¹ˆç”¨æˆ·ä¼šçœ‹åˆ° os.crazyaigc.comï¼Ÿ**
1. å¾®ä¿¡æˆæƒéœ€è¦é€šè¿‡è´¦å·ä¸­å¿ƒè¿›è¡Œï¼ˆæ¶æ„è®¾è®¡ï¼‰
2. æµè§ˆå™¨é‡å®šå‘ä¼šè®©ç”¨æˆ·çœ‹åˆ°ä¸­é—´åŸŸå
3. è¿™æ˜¯**æ‰€æœ‰ç¬¬ä¸‰æ–¹ç™»å½•çš„æ ‡å‡†æµç¨‹**ï¼ˆå¾®ä¿¡ã€QQã€æ”¯ä»˜å®ç­‰ï¼‰

**ç”¨æˆ·ä½“éªŒä¼˜åŒ–å»ºè®®**ï¼š
- âœ… é¡µé¢åŠ è½½æ—¶æ˜¾ç¤º"æ­£åœ¨è·³è½¬åˆ°å¾®ä¿¡æˆæƒ..."æç¤º
- âœ… æˆæƒå®Œæˆåå¿«é€Ÿè·³è½¬å›ä¸šåŠ¡ç³»ç»Ÿ
- âœ… ç”¨æˆ·ä¸»è¦æ—¶é—´éƒ½åœ¨ä¸šåŠ¡ç³»ç»ŸåŸŸåæ“ä½œ
- âŒ ä¸è¦å°è¯•ç”¨ iframe éšè—ï¼ˆå¾®ä¿¡å®‰å…¨é™åˆ¶ä¼šé˜»æ­¢ï¼‰

**ç”¨æˆ·æ³¨å†Œæµç¨‹**ï¼š
1. ç”¨æˆ·**å¿…é¡»å…ˆé€šè¿‡å¾®ä¿¡ç™»å½•**ï¼Œç³»ç»Ÿè‡ªåŠ¨åˆ›å»ºè´¦å·
2. ç®¡ç†å‘˜äººå·¥å®¡æ ¸ç”¨æˆ·èº«ä»½
3. ç®¡ç†å‘˜ä¸ºç”¨æˆ·è®¾ç½®æ‰‹æœºå·å’Œå¯†ç ï¼ˆå¯é€‰ï¼‰
4. ç”¨æˆ·å¯ä½¿ç”¨æ‰‹æœºå·+å¯†ç ç™»å½•

---

### æ ¸å¿ƒæ¶æ„ï¼šä¸‰å±‚è´¦å·æ¨¡å‹

```
ç¬¬1å±‚: Userï¼ˆç”¨æˆ·å±‚ï¼‰- çœŸå®çš„äºº
â”œâ”€ userId (UUID): ç»Ÿä¸€ç”¨æˆ·ID
â”œâ”€ unionId (VARCHAR): å¾®ä¿¡ UnionIDï¼Œè·¨åº”ç”¨ç»Ÿä¸€æ ‡è¯†
â””â”€ phoneNumber: æ‰‹æœºå·ï¼ˆç”¨äºå¯†ç ç™»å½•ï¼‰

ç¬¬2å±‚: UserAccountï¼ˆç™»å½•å…¥å£å±‚ï¼‰- å„ç«¯çš„ openid
â”œâ”€ provider: æä¾›å•†ï¼ˆå¦‚ 'wechat'ï¼‰
â”œâ”€ appId: åº”ç”¨ AppID
â”œâ”€ openId: è¯¥åº”ç”¨ä¸‹çš„ openid
â””â”€ type: ç™»å½•ç±»å‹ï¼ˆ'web' | 'mp' | 'miniapp' | 'app'ï¼‰

ç¬¬3å±‚: Sessionï¼ˆä¼šè¯å±‚ï¼‰- ç™»å½•ä¼šè¯ç®¡ç†
â”œâ”€ token: JWT tokenï¼ˆ7å¤©æœ‰æ•ˆï¼‰
â””â”€ expiresAt: è¿‡æœŸæ—¶é—´
```

**è®¾è®¡ç†å¿µ**ï¼š
```
unionid = äººï¼ˆåŒä¸€ç”¨æˆ·åœ¨ä¸åŒåº”ç”¨ï¼‰
openid = ç™»å½•å…¥å£ï¼ˆåŒä¸€åº”ç”¨ä¸åŒç”¨æˆ·ï¼‰
```

---

### API æ¥å£è¯´æ˜

#### 1. å‘èµ·å¾®ä¿¡ç™»å½•ï¼ˆæ™ºèƒ½æ£€æµ‹ï¼‰

**æ¥å£**: `GET /api/auth/wechat/login`

**è¯·æ±‚å‚æ•°**:
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| callbackUrl | string | æ˜¯ | ç™»å½•åå›è°ƒURLï¼ˆéœ€URLç¼–ç ï¼‰ |

**è¯·æ±‚ç¤ºä¾‹**:
```
GET https://os.crazyaigc.com/api/auth/wechat/login?callbackUrl=https%3A%2F%2Fyour-domain.com%2Fauth%2Fcallback
```

**å“åº”**:
- å¾®ä¿¡å†…ç½®æµè§ˆå™¨ï¼šè·³è½¬åˆ°å…¬ä¼—å·æˆæƒé¡µé¢
- å…¶ä»–æµè§ˆå™¨ï¼šè·³è½¬åˆ°å¼€æ”¾å¹³å°æ‰«ç é¡µé¢

---

#### 2. éªŒè¯Token

**æ¥å£**: `POST /api/auth/verify-token`

**è¯·æ±‚ä½“**:
```json
{
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "data": {
    "valid": true,
    "userId": "550e8400-e29b-41d4-a716-446655440000"
  }
}
```

---

#### 3. è·å–ç”¨æˆ·ä¿¡æ¯

**æ¥å£**: `GET /api/auth/user-info`

**è¯·æ±‚å¤´**:
```
Authorization: Bearer <token>
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "data": {
    "userId": "550e8400-e29b-41d4-a716-446655440000",
    "unionId": "oZh_a67J99sgfrHFX5pRPcXr0uQA",
    "phoneNumber": "13800138000",
    "email": null,
    "createdAt": "2026-01-29T03:17:24.451Z",
    "lastLoginAt": "2026-01-31T08:46:42.123Z",
    "profile": {
      "nickname": "å¾®ä¿¡æ˜µç§°",
      "avatarUrl": "https://wx.qlogo.cn/xxx"
    },
    "accounts": [
      {
        "provider": "wechat",
        "type": "web",
        "nickname": "å¾®ä¿¡æ˜µç§°",
        "avatarUrl": "https://wx.qlogo.cn/xxx",
        "createdAt": "2026-01-29T03:17:24.451Z"
      }
    ]
  }
}
```

---

#### 4. å¯†ç ç™»å½•

**æ¥å£**: `POST /api/auth/password/login`

**è¯·æ±‚ä½“**:
```json
{
  "phoneNumber": "13800138000",
  "password": "password123"
}
```

**æˆåŠŸå“åº”**:
```json
{
  "success": true,
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "userId": "550e8400-e29b-41d4-a716-446655440000"
}
```

---

#### 5. ç™»å‡º

**æ¥å£**: `POST /api/auth/signout`

**è¯·æ±‚å¤´**:
```
Authorization: Bearer <token>
```

---

#### 6. è·å–ä¼šè¯åˆ—è¡¨

**æ¥å£**: `GET /api/auth/sessions`

**è¯´æ˜**: è·å–å½“å‰ç™»å½•ç”¨æˆ·çš„æ‰€æœ‰ä¼šè¯ä¿¡æ¯ï¼ˆå¯ç”¨äºè®¾å¤‡ç®¡ç†ã€å®‰å…¨ç›‘æ§ï¼‰

**è¯·æ±‚å¤´**:
```
Authorization: Bearer <token>
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "data": {
    "sessions": [
      {
        "id": "550e8400-e29b-41d4-a716-446655440000",
        "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
        "deviceInfo": {
          "ip": "123.45.67.89",
          "platform": "Windows",
          "deviceType": "PC",
          "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36"
        },
        "expiresAt": "2026-02-08T15:30:00Z",
        "createdAt": "2026-02-01T10:14:29.661Z"
      },
      {
        "id": "660e9511-f0a3-52c5-b827-557771551111",
        "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
        "deviceInfo": {
          "ip": "123.45.67.90",
          "platform": "iOS",
          "deviceType": "Mobile",
          "userAgent": "Mozilla/5.0 (iPhone; CPU iPhone OS 16_0 like Mac OS X)"
        },
        "expiresAt": "2026-02-08T16:20:00Z",
        "createdAt": "2026-02-01T11:30:00.000Z"
      }
    ]
  }
}
```

**ä½¿ç”¨åœºæ™¯**:
- ç”¨æˆ·æŸ¥çœ‹è‡ªå·±çš„ç™»å½•è®¾å¤‡åˆ—è¡¨
- å®‰å…¨ç›‘æ§ï¼ˆå¼‚åœ°ç™»å½•æé†’ï¼‰
- è®¾å¤‡ç®¡ç†ï¼ˆè¿œç¨‹ç™»å‡ºå…¶ä»–è®¾å¤‡ï¼‰
- ä¼šè¯ç»Ÿè®¡ï¼ˆå½“å‰æ´»è·ƒä¼šè¯æ•°ï¼‰

---

### æ•°æ®åº“é›†æˆ

#### ä¸šåŠ¡ç³»ç»Ÿå¿…éœ€å­—æ®µ

```sql
-- ä¸šåŠ¡ç³»ç»Ÿç”¨æˆ·è¡¨ç¤ºä¾‹
CREATE TABLE users (
  id VARCHAR(255) PRIMARY KEY,  -- æœ¬åœ°ä¸»é”®ï¼ˆCUID/UUIDï¼‰
  auth_center_user_id UUID UNIQUE NOT NULL,  -- âœ… å…³è”è´¦å·ä¸­å¿ƒ
  role VARCHAR(50) DEFAULT 'USER',
  profile JSONB,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- å…³é”®ç´¢å¼•
CREATE UNIQUE INDEX users_auth_center_user_id_idx
  ON users(auth_center_user_id);
```

**å­—æ®µè¯´æ˜**ï¼š
| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| id | VARCHAR(255) | âœ… | æœ¬åœ°ä¸»é”® |
| auth_center_user_id | UUID | âœ… | **å…³è”è´¦å·ä¸­å¿ƒçš„ user_id** |
| role | VARCHAR(50) | - | ä¸šåŠ¡è§’è‰² |
| profile | JSONB | - | ç”¨æˆ·é…ç½®ä¿¡æ¯ |

---

### å®Œæ•´ä»£ç ç¤ºä¾‹

#### å‰ç«¯ï¼šReact/Vite ç™»å½•é¡µé¢

```typescript
// src/pages/Login.tsx
export default function LoginPage() {
  const handleWechatLogin = () => {
    // è·³è½¬åˆ°ä¸šåŠ¡ç³»ç»Ÿçš„åç«¯ä»£ç†æ¥å£
    window.location.href = '/api/auth/wechat/login'
  }

  return (
    <div>
      <h1>ç™»å½•</h1>
      <button onClick={handleWechatLogin}>
        å¾®ä¿¡ç™»å½•
      </button>
    </div>
  )
}
```

#### åç«¯ï¼šGo ä¸šåŠ¡ç³»ç»Ÿä»£ç†å®ç°

```go
// internal/handler/auth.go
package handler

import (
    "encoding/json"
    "fmt"
    "net/http"
    "net/url"

    "github.com/gin-gonic/gin"
)

// 1. å‘èµ·å¾®ä¿¡ç™»å½•ï¼ˆä»£ç†æ¥å£ï¼‰
// GET /api/auth/wechat/login
func WechatLogin(c *gin.Context) {
    // ä¸šåŠ¡ç³»ç»Ÿçš„å›è°ƒåœ°å€
    callbackUrl := "https://pr.crazyaigc.com/api/auth/callback"

    // è½¬å‘åˆ°è´¦å·ä¸­å¿ƒ
    authCenterURL := fmt.Sprintf(
        "https://os.crazyaigc.com/api/auth/wechat/login?callbackUrl=%s",
        url.QueryEscape(callbackUrl),
    )

    // é‡å®šå‘ç”¨æˆ·ï¼ˆç”¨æˆ·çœ‹åˆ°çš„æ˜¯å¾®ä¿¡æˆæƒé¡µé¢ï¼‰
    c.Redirect(http.StatusFound, authCenterURL)
}

// 2. æ¥æ”¶è´¦å·ä¸­å¿ƒå›è°ƒï¼ˆä»£ç†æ¥å£ï¼‰
// GET /api/auth/callback
func AuthCallback(c *gin.Context) {
    userId := c.Query("userId")
    token := c.Query("token")

    // éªŒè¯å‚æ•°
    if userId == "" || token == "" {
        c.Redirect(http.StatusFound, "/login?error=missing_params")
        return
    }

    // è°ƒç”¨è´¦å·ä¸­å¿ƒéªŒè¯ token
    verifyResp, err := http.PostForm(
        "https://os.crazyaigc.com/api/auth/verify-token",
        url.Values{"token": {token}},
    )
    if err != nil {
        c.Redirect(http.StatusFound, "/login?error=verify_failed")
        return
    }
    defer verifyResp.Body.Close()

    var result struct {
        Success bool `json:"success"`
        Data struct {
            Valid  bool   `json:"valid"`
            UserID string `json:"userId"`
        } `json:"data"`
    }
    if err := json.NewDecoder(verifyResp.Body).Decode(&result); err != nil {
        c.Redirect(http.StatusFound, "/login?error=decode_failed")
        return
    }

    // éªŒè¯ token
    if !result.Success || !result.Data.Valid || result.Data.UserID != userId {
        c.Redirect(http.StatusFound, "/login?error=invalid_token")
        return
    }

    // 3. åˆ›å»º/è·å–æœ¬åœ°ç”¨æˆ·
    user, err := findOrCreateUser(userId)
    if err != nil {
        c.Redirect(http.StatusFound, "/login?error=user_creation_failed")
        return
    }

    // 4. è®¾ç½® session
    setSession(c, user)

    // 5. è·³è½¬åˆ°é¦–é¡µ
    c.Redirect(http.StatusFound, "/dashboard")
}

// æŸ¥æ‰¾æˆ–åˆ›å»ºæœ¬åœ°ç”¨æˆ·
func findOrCreateUser(authCenterUserID string) (*User, error) {
    var user User
    result := db.Where("auth_center_user_id = ?", authCenterUserID).First(&user)

    if result.Error != nil {
        // ç”¨æˆ·ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°ç”¨æˆ·
        user = User{
            ID:                generateID(),
            AuthCenterUserID:  authCenterUserID,
            Role:              "USER",
        }
        if err := db.Create(&user).Error; err != nil {
            return nil, err
        }
    }

    return &user, nil
}

// è®¾ç½® session
func setSession(c *gin.Context, user *User) {
    // ä½¿ç”¨ cookie æˆ– JWT è®¾ç½® session
    c.SetCookie(
        "user_id",
        user.ID,
        3600*24*7, // 7å¤©
        "/",
        "pr.crazyaigc.com",
        true,      // HTTPS only
        true,      // httpOnly
    )
}
```

---

### Next.js åç«¯ä»£ç†ç¤ºä¾‹ï¼ˆå¦‚æœä½¿ç”¨ Next.js API Routesï¼‰

#### å‰ç«¯ç™»å½•é¡µé¢

```typescript
// app/login/page.tsx
'use client'

export default function LoginPage() {
  const handleWechatLogin = () => {
    // è·³è½¬åˆ°ä¸šåŠ¡ç³»ç»Ÿçš„åç«¯ä»£ç†æ¥å£
    window.location.href = '/api/auth/wechat/login'
  }

  return (
    <div>
      <h1>ç™»å½•</h1>
      <button onClick={handleWechatLogin}>
        å¾®ä¿¡ç™»å½•
      </button>
    </div>
  )
}
```

#### åç«¯ä»£ç†æ¥å£

```typescript
// app/api/auth/wechat/login/route.ts
import { NextResponse } from 'next/server'

export async function GET() {
    const callbackUrl = `${process.env.NEXT_PUBLIC_APP_URL}/api/auth/callback`
    const authCenterUrl = `https://os.crazyaigc.com/api/auth/wechat/login?callbackUrl=${encodeURIComponent(callbackUrl)}`

    return NextResponse.redirect(authCenterUrl)
}

// app/api/auth/callback/route.ts
import { NextRequest, NextResponse } from 'next/server'
import { PrismaClient } from '@prisma/client'

const prisma = new PrismaClient()

export async function GET(request: NextRequest) {
    const searchParams = request.nextUrl.searchParams
    const userId = searchParams.get('userId')
    const token = searchParams.get('token')

    if (!userId || !token) {
        return NextResponse.redirect(new URL('/login?error=missing_params', request.url))
    }

    // éªŒè¯ token
    const verifyResp = await fetch('https://os.crazyaigc.com/api/auth/verify-token', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ token })
    })

    const verifyResult = await verifyResp.json()

    if (!verifyResult.success || !verifyResult.data.valid) {
        return NextResponse.redirect(new URL('/login?error=invalid_token', request.url))
    }

    // åˆ›å»º/è·å–æœ¬åœ°ç”¨æˆ·
    let user = await prisma.user.findUnique({
        where: { authCenterUserId: userId }
    })

    if (!user) {
        user = await prisma.user.create({
            data: {
                id: cuid(),
                authCenterUserId: userId,
                role: 'USER'
            }
        })
    }

    // è®¾ç½® session
    const response = NextResponse.redirect(new URL('/dashboard', request.url))
    response.cookies.set('user_id', user.id, {
        httpOnly: true,
        secure: process.env.NODE_ENV === 'production',
        sameSite: 'lax',
        maxAge: 60 * 60 * 24 * 7
    })

    return response
}
```

---

### å¸¸è§é—®é¢˜

**Q: ä¸ºä»€ä¹ˆéœ€è¦ä¸šåŠ¡ç³»ç»Ÿåç«¯ä»£ç†ï¼Ÿ**

A: ä¸ºäº†ä¿æŒç”¨æˆ·ä½“éªŒä¸€è‡´æ€§ï¼š
- âœ… ç”¨æˆ·å…¨ç¨‹åœ¨ä¸šåŠ¡ç³»ç»ŸåŸŸåä¸‹æ“ä½œï¼ˆpr.crazyaigc.comï¼‰
- âœ… ç”¨æˆ·çœ‹ä¸åˆ°è´¦å·ä¸­å¿ƒçš„åŸŸåï¼ˆos.crazyaigc.comï¼‰
- âœ… ç”¨æˆ·æ„ŸçŸ¥ä¸åˆ°è´¦å·ä¸­å¿ƒçš„å­˜åœ¨

**Q: åç«¯ä»£ç†ä¼šå¢åŠ å¤æ‚åº¦å—ï¼Ÿ**

A: ä¸ä¼šï¼Œä»£ç†å®ç°éå¸¸ç®€å•ï¼š
```go
// å‘èµ·ç™»å½•ï¼š302 é‡å®šå‘åˆ°è´¦å·ä¸­å¿ƒ
c.Redirect(302, authCenterURL)

// æ¥æ”¶å›è°ƒï¼šéªŒè¯ token + åˆ›å»ºæœ¬åœ°ç”¨æˆ·
```

**Q: ç”¨æˆ·å¦‚ä½•ä½¿ç”¨æ‰‹æœºå·+å¯†ç ç™»å½•ï¼Ÿ**

A: ç”¨æˆ·å¿…é¡»å…ˆå®Œæˆä»¥ä¸‹æ­¥éª¤ï¼š
1. ç”¨æˆ·é¦–æ¬¡å¿…é¡»ä½¿ç”¨å¾®ä¿¡ç™»å½•ï¼Œç³»ç»Ÿè‡ªåŠ¨åˆ›å»ºè´¦å·
2. ç®¡ç†å‘˜éªŒè¯ç”¨æˆ·èº«ä»½ï¼Œç¡®è®¤ç”¨æˆ·ä¿¡æ¯çœŸå®æ€§
3. ç®¡ç†å‘˜ä¸ºç”¨æˆ·è®¾ç½®æ‰‹æœºå·å’Œå¯†ç 
4. è®¾ç½®å®Œæˆåï¼Œç”¨æˆ·å¯ä½¿ç”¨æ‰‹æœºå·+å¯†ç ç™»å½•

**Q: ä¸‰å±‚è´¦å·æ¨¡å‹çš„ä¼˜åŠ¿æ˜¯ä»€ä¹ˆï¼Ÿ**

A:
- âœ… `unionId` ç»Ÿä¸€ç”¨æˆ·æ ‡è¯†
- âœ… `UserAccount` æ”¯æŒå¤šä¸ªç™»å½•å…¥å£
- âœ… æ˜“äºæ‰©å±•ï¼ˆå°ç¨‹åºã€Appç­‰ï¼‰
- âœ… ç¬¦åˆå¾®ä¿¡ UnionID æœºåˆ¶æ ‡å‡†

**Q: Tokenè¿‡æœŸæ€ä¹ˆåŠï¼Ÿ**

A: Tokenæœ‰æ•ˆæœŸä¸º 7 å¤©ï¼Œè¿‡æœŸåéœ€è¦é‡æ–°ç™»å½•ã€‚

---

### è”ç³»æ”¯æŒ

**æŠ€æœ¯æ”¯æŒ**:
- é‚®ç®±: support@crazyaigc.com
- æ–‡æ¡£: https://docs.crazyaigc.com/auth-center

**éœ€è¦å¸®åŠ©çš„åœºæ™¯**:
1. æ•°æ®åº“æ¥å…¥ï¼ˆåˆ›å»ºæ•°æ®åº“ã€é…ç½®æƒé™ï¼‰
2. æŠ€æœ¯é—®é¢˜ï¼ˆAPIè°ƒç”¨ã€é›†æˆéš¾é¢˜ã€Bugåé¦ˆï¼‰
3. ä¸šåŠ¡å’¨è¯¢ï¼ˆå¤šä¸šåŠ¡ç³»ç»Ÿäº’é€šã€ç”¨æˆ·æ•°æ®è¿ç§»ï¼‰

---

## é™„å½•

### A. å¿«é€Ÿæ£€æŸ¥æ¸…å•

**æ–°ç³»ç»Ÿåˆ›å»º**ï¼š
- [ ] åˆ›å»ºç‹¬ç«‹ä»“åº“
- [ ] åˆå§‹åŒ–å‰ç«¯ï¼ˆNext.js + TypeScriptï¼‰
- [ ] åˆå§‹åŒ–åç«¯ï¼ˆGo + Ginï¼‰
- [ ] é…ç½®æ•°æ®åº“ï¼ˆPostgreSQL + UUIDï¼‰
- [ ] å®ç°è®¤è¯ï¼ˆJWTï¼‰
- [ ] é…ç½® Nginx
- [ ] ç¼–å†™ API æ–‡æ¡£
- [ ] é…ç½®éƒ¨ç½²è„šæœ¬

### B. å¸¸è§é—®é¢˜

**Q: ä¸ºä»€ä¹ˆå¼ºåˆ¶ä½¿ç”¨ UUID è€Œä¸æ˜¯è‡ªå¢ IDï¼Ÿ**
A: UUID æ”¯æŒåˆ†å¸ƒå¼ç³»ç»Ÿï¼Œé¿å… ID å†²çªï¼Œæé«˜å®‰å…¨æ€§ã€‚

**Q: ä¸ºä»€ä¹ˆæ•°æ®åº“ä½¿ç”¨ snake_case è€Œä»£ç ä½¿ç”¨ camelCaseï¼Ÿ**
A: è¿™æ˜¯è¡Œä¸šæ ‡å‡†ï¼šPostgreSQL ä½¿ç”¨ snake_caseï¼ŒGo/JavaScript ä½¿ç”¨ camelCaseã€‚é€šè¿‡ ORM æ˜ å°„å®ç°ã€‚

**Q: ä¸ºä»€ä¹ˆç¦æ­¢ä½¿ç”¨ AutoMigrateï¼Ÿ**
A: ç”Ÿäº§ç¯å¢ƒåº”è¯¥ä½¿ç”¨æ•°æ®åº“è¿ç§»å·¥å…·ï¼ˆå¦‚ golang-migrateï¼‰è¿›è¡Œç‰ˆæœ¬æ§åˆ¶ï¼Œé¿å…æ„å¤–ä¿®æ”¹ã€‚

**Q: å¦‚ä½•åœ¨æœ¬åœ°æµ‹è¯•è·¨æœåŠ¡å™¨æ•°æ®åº“è¿æ¥ï¼Ÿ**
A: ä½¿ç”¨ SSH éš§é“ï¼š
```bash
ssh -N -L 5433:localhost:5432 hangzhou-ali
# ç„¶åè¿æ¥ localhost:5433
```

---

**æœ¬æ–‡æ¡£ä¸º KeeNChase æŠ€æœ¯å›¢é˜Ÿçš„"å®ªæ³•"ï¼Œæ‰€æœ‰å¼€å‘ã€éƒ¨ç½²å·¥ä½œå¿…é¡»ä¸¥æ ¼éµå®ˆã€‚**
